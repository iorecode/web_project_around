!function(){"use strict";var e={d:function(t,r){for(var o in r)e.o(r,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:r[o]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}};e.d({},{M:function(){return U}});class t{constructor(e,t){this._inputs=Array.from(t.querySelectorAll(e.inputSelector)),this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._button=t.querySelector(e.submitButtonSelector),this._inactiveButtonClass=e.inactiveButtonClass}enableValidation(){this._toggleButton(this._inputs),this._inputs.forEach((e=>{e.addEventListener("input",(()=>{this._validateInputs(e),this._toggleButton(this._inputs)}))}))}_toggleButton(e){this._checkInvalid(e)?(this._button.disabled=!0,this._button.classList.add(this._inactiveButtonClass)):(this._button.disabled=!1,this._button.classList.remove(this._inactiveButtonClass))}_checkInvalid(e){return e.some((e=>!e.validity.valid))}_validateInputs(e){const t=e.nextElementSibling;e.validity.valid?(e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""):(e.classList.add(this._inputErrorClass),t.classList.add(this._errorClass),t.textContent=e.validationMessage)}}class r{constructor(e,t,r,o,s){this._name=e.name,this._link=e.link,this._cardID=e._id,this._ownerID=e.owner._id,this._likes=e.likes,this._cardSelector=t,this._handleConfirm=r,this._currentUserId=o,this._handleLikes=s}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".photo__card").cloneNode(!0)}_setListeners(){const e=this._card.querySelector(".photo__like"),t=this._card.querySelector(".photo__delete");this._ownerID===this._currentUserId?t.addEventListener("click",(()=>{this._handleConfirm(this)})):t.style.display="none",e.addEventListener("click",(()=>this._handleLikes(this._cardID,this._card)))}updateLikes(e){const t=this._card.querySelector(".photo__like");this._card.querySelector(".photo__like-count").textContent=e.likes.length,e.likes.some((e=>e._id===this._currentUserId))?t.classList.add("photo__like_active"):t.classList.remove("photo__like_active")}generateCard(){return this._card=this._getTemplate(),this._card.querySelector(".photo__card-image").src=this._link,this._card.querySelector(".photo__card-image").alt=this._name,this._card.querySelector(".photo__text").textContent=this._name,this._card.querySelector(".photo__like-count").textContent=this._likes.length,this._likes.some((e=>e._id===this._currentUserId))&&this._card.querySelector(".photo__like").classList.add("photo__like_active"),console.log("Card generated:",this._card),this._setListeners(),this._card}handleNoPics(){const e=document.querySelectorAll(".photo__card"),t=document.querySelector(".photo__empty");0===e.length?document.querySelector(".photo").insertAdjacentHTML("afterbegin",'<p class="photo__empty">NO PICTURES</p>'):t&&t.remove()}}document.querySelector(".user__name"),document.querySelector(".user__role");const o=document.querySelector(".user__image"),s=document.querySelector(".user__image-edit"),n=document.querySelector(".page__opacity"),i=(document.querySelectorAll(".photo__card"),document.querySelector(".photo__empty"),document.querySelector("#TitleInput"),document.querySelector("#LinkInput"),document.querySelector("#AboutInput")),a=document.querySelector("#NameInput"),c=document.querySelector("#FormProfile"),l=document.querySelector("#FormUpload"),d=document.querySelector(".user__edit"),u=document.querySelector(".user__add"),_=document.querySelector(".photo"),h=document.querySelectorAll(".form__btn-close"),p=document.querySelector(".popup__close");document.querySelector(".popup__image"),document.querySelector(".popup__image-subtitle");class m{constructor(e){this._popup=document.querySelector(e),this._isOpen=!1,this._handleEscClose=this._handleEscClose.bind(this)}open(){n.classList.add("page__opacity-toggled"),n.style.display="block",document.addEventListener("keydown",this._handleEscClose),this._isOpen=!0}close(){n.classList.remove("page__opacity-toggled"),n.style.display="none",document.removeEventListener("keydown",this._handleEscClose),this._isOpen=!1}_handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){document.addEventListener("click",(e=>{n.contains(e.target)&&this.close()})),p.addEventListener("click",(()=>{this.close()})),h.forEach((e=>{e.addEventListener("click",(()=>{this.close()}))}))}}class y extends m{constructor(e){super(e),this._popupSubtitle=this._popup.querySelector(".popup__image-subtitle"),this._popupImage=this._popup.querySelector(".popup__image")}open(e,t){super.open(),this._popup.style.display="inline-block",this._popupImage.src=e,this._popupSubtitle.textContent=t}close(){super.close(),this._popup.style.display="none",this._popupImage.src="",this._popupSubtitle.textContent=""}setEventListeners(){super.setEventListeners(),document.addEventListener("click",(()=>{this._isOpen&&this.close()}))}}class v extends m{constructor(e,t){super(e),this._handleSubmit=t.bind(this),this._inputList=this._popup.querySelectorAll(".form__input")}_getInputValues(){const e={};return this._inputList.forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){super.setEventListeners();const e=document.querySelectorAll(".form__btn-close");this._popup.addEventListener("submit",(e=>{e.preventDefault(),this._handleSubmit(this._getInputValues())})),e.forEach((e=>{e.addEventListener("click",(()=>{this.close()}))}))}close(){super.close(),this._getInputValues(),this._popup.classList.remove("form_opened"),this._inputList.forEach((e=>{e.value="",console.log("cleared")}))}open(){super.open(),this._popup.classList.add("form_opened")}}class f{constructor({nameSelector:e,aboutSelector:t,pictureSelector:r}){this._nameElement=document.querySelector(e),this._aboutElement=document.querySelector(t),this._pictureElement=document.querySelector(r)}getUserInfo(){return{name:this._nameElement.textContent,about:this._aboutElement.textContent,avatar:this._pictureElement.src}}setUserInfo({name:e,about:t,avatar:r}){console.log("Setting user info:",{name:e,about:t,avatar:r}),this._nameElement.textContent=e,this._aboutElement.textContent=t,r&&(this._pictureElement.src=r)}}class S{constructor(e){this._standardUrl=e.url,this._headers=e.headers}getInitialCards(){return fetch(`${this._standardUrl}/cards`,{headers:this._headers}).then((e=>e.ok?(console.log("cards loaded successfully"),e.json()):Promise.reject(`Error: ${e.status}`))).catch((e=>(console.error("Error in getInitialCards:",e),Promise.reject(e))))}getUserData(){return fetch(`${this._standardUrl}/users/me`,{headers:this._headers}).then((e=>e.ok?(console.log(e),e.json()):Promise.reject(`Error: ${e.status}`))).catch((e=>(console.error("Error in getUserData:",e),Promise.reject(e))))}saveProfileChanges(e){return console.log("Saving profile changes:",e),fetch(`${this._standardUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.name,about:e.about})}).then((e=>(console.log("Received response:",e),e.ok?e.json():Promise.reject(`Error: ${e.status}`)))).catch((e=>(console.error("Error in saveProfileChanges:",e),Promise.reject(e))))}updateProfilePicture({avatar:e}){return console.log("Updating profile picture with URL:",e),fetch(`${this._standardUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then((e=>(console.log("Received response:",e),e.ok?e.json():Promise.reject(`Error: ${e.status}`)))).catch((e=>(console.error("Error in updateProfilePicture:",e),Promise.reject(e))))}addCard(e){return fetch(`${this._standardUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:e.name,link:e.link})}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`))).catch((e=>(console.error("Error in addCard:",e),Promise.reject(e))))}deleteCard(e){return fetch(`${this._standardUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`))).catch((e=>(console.error("Error in deleteCard:",e),Promise.reject(e))))}addLike(e){return fetch(`${this._standardUrl}/cards/likes/${e}`,{method:"PUT",headers:this._headers}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`))).catch((e=>(console.error("Error in addLike:",e),Promise.reject(e))))}removeLike(e){return fetch(`${this._standardUrl}/cards/likes/${e}`,{method:"DELETE",headers:this._headers}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`))).catch((e=>(console.error("Error in removeLike:",e),Promise.reject(e))))}}class g{constructor({data:e,renderer:t},r){this._renderList=e,this._renderMethod=t,this._renderContainer=r}_clearContainer(){this._renderContainer.innerHTML=""}renderItem(){this._clearContainer(),this._renderList.forEach((e=>{this._renderMethod(e)}))}setItem(e){this._renderContainer.prepend(e)}}const E=new f({nameSelector:".user__name",aboutSelector:".user__role",pictureSelector:".user__image-main"}),C=new S({url:"https://around.nomoreparties.co/v1/web-ptbr-cohort-11",headers:{authorization:"ef61af7f-62bd-42c6-ac64-de2d2731292b","Content-type":"application/json"}}),b=new g({data:[],renderer:e=>{const t=new r(e,"#card-template",handleCardClick).generateCard();b.setItem(t)}},_);function L(e,t){const r=t.querySelector(".photo__like"),o=t.querySelector(".photo__like-count");r.classList.contains("photo__like_active")?C.removeLike(e).then((e=>{r.classList.remove("photo__like_active"),o.textContent=e.likes.length})).catch((e=>{console.error(e)})):C.addLike(e).then((e=>{r.classList.add("photo__like_active"),o.textContent=e.likes.length})).catch((e=>{console.error(e)}))}function k(e){document.querySelectorAll(e).forEach((e=>e.querySelector(".photo__card-image").addEventListener("click",(t=>{t.stopPropagation();const r=e.querySelector(".photo__card-image").src,o=e.querySelector(".photo__text").textContent,s=new y(".popup");s.open(r,o),s.setEventListeners(".photo__card")}))))}function q(e,t){const r=document.querySelector(t);r?e?r.textContent+="...":r.textContent=r.textContent.replace("...",""):console.error(`Element with selector ${t} not found`)}const P=new S({url:"https://around.nomoreparties.co/v1/web-ptbr-cohort-11",headers:{authorization:"ef61af7f-62bd-42c6-ac64-de2d2731292b","Content-type":"application/json"}}),I=new f({nameSelector:".user__name",aboutSelector:".user__role",pictureSelector:".user__image-main"}),U=new class extends m{constructor(e,t){super(e),this._handleSubmit=t}open(e){super.open(),this._target=e,this._popup.classList.add("form_opened")}close(){super.close(),this._popup.classList.remove("form_opened")}setEventListeners(){super.setEventListeners(),this._popup.addEventListener("submit",(e=>{e.preventDefault(),this._handleSubmit(this._target),this.close()}))}}("#SubmitCheck",(e=>{C.deleteCard(e._cardID).then((()=>{e._card.remove()})).catch((e=>{console.log(e)})),U.close()}));let w;U.setEventListeners(),P.getUserData().then((e=>{I.setUserInfo(e),w=e._id,P.getInitialCards().then((e=>{const t=new g({data:e,renderer:e=>{const o=new r(e,"#card-template",(e=>U.open(e)),w,L).generateCard();t.setItem(o)}},_);t.renderItem(),k(".photo__card")})).catch((e=>{console.error("Failed to load initial cards:",e)}))})).catch((e=>{console.error("Failed to fetch user data:",e)})),new t({inputSelector:".form__input",submitButtonSelector:".form__button",inactiveButtonClass:"form__button-disabled",inputErrorClass:"form__input-invalid",errorClass:"form__input-error"},c).enableValidation(),new t({inputSelector:".form__input",submitButtonSelector:".form__button",inactiveButtonClass:"form__button-disabled",inputErrorClass:"form__input-invalid",errorClass:"form__input-error"},l).enableValidation();const j=new v("#FormProfile",(function(e){return q(!0,"#UserUploadButton"),console.log("Submitting profile form with values:",e),""!==e.name&&""!==e.about?(console.log(e),this.close(),C.saveProfileChanges(e).then((e=>{console.log("Profile changes saved successfully:",e),E.setUserInfo(e),document.querySelector("#FormProfile").classList.remove("form_opened")})).catch((e=>{console.error("Failed to save profile changes:",e)})).finally((()=>q(!1,"#UserUploadButton")))):Promise.reject("Invalid input values")}));j.setEventListeners();const x=new v("#FormUpload",(function(e,t){if(q(!0,"#CardUploadButton"),""!==e.url&&""!==e.title){const o={name:e.title,link:e.url};C.addCard(o).then((e=>{console.log("New card added:",e),e.owner={_id:t};const o=new r(e,"#card-template",(e=>U.open(e)),t,L).generateCard();document.querySelector(".photo").prepend(o),k(".photo__card"),this.close()})).catch((e=>{console.error("Failed to add new card:",e)})).finally((()=>q(!1,"#CardUploadButton")))}else console.error("Title and URL cannot be empty")}));x.setEventListeners(),d.addEventListener("click",(()=>{j.open();const e=I.getUserInfo();a.value=e.name,i.value=e.about})),u.addEventListener("click",(()=>{x.open()}));const B=new v("#FormProfilePicture",(e=>{q(!0,"#PictureUploadButton");const t=e.profileUrl;P.updateProfilePicture({avatar:t}).then((e=>{I.setUserInfo({...e,avatar:e.avatar}),B.close()})).catch((e=>{console.error("Failed to update profile picture:",e)})).finally((()=>q(!1,"#PictureUploadButton")))}));B.setEventListeners(),new t({inputSelector:".form__input",submitButtonSelector:".form__button",inactiveButtonClass:"form__button-disabled",inputErrorClass:"form__input-invalid",errorClass:"form__input-error"},document.querySelector("#FormProfilePicture")).enableValidation(),o.addEventListener("click",(()=>{B.open()})),o.addEventListener("mouseover",(()=>{o.querySelector(".user__image-main").style.opacity="25%",s.style.display="block"})),o.addEventListener("mouseout",(()=>{o.querySelector(".user__image-main").style.opacity="100%",s.style.display="none"}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FBcUNELEVBQUksSUFFeERrRCxTQUFRLElBQU1ULEdBQVcsRUFBTyx5QkFBd0IsSUFPN0RjLEVBQVlwRyxvQkFFZ0IsSUFBSXZHLEVBQzlCLENBQ0VTLGNBQWUsZUFDZk8scUJBQXNCLGdCQUN0QkUsb0JBQXFCLHdCQUNyQlAsZ0JBQWlCLHNCQUNqQkUsV0FBWSxxQkFFZDhDLFNBQVM1QyxjQUFjLHdCQUVMSSxtQkFFcEI4RCxFQUFVMUQsaUJBQWlCLFNBQVMsS0FDbENvTCxFQUFZeEcsTUFBTSxJRHZCbEJsQixFQUFVMUQsaUJBQWlCLGFBQWEsS0FDdEMwRCxFQUFVbEUsY0FBYyxxQkFBcUJtRCxNQUFNNEksUUFBVSxNQUM3RDVILEVBQWNoQixNQUFNQyxRQUFVLE9BQU8sSUFFdkNjLEVBQVUxRCxpQkFBaUIsWUFBWSxLQUNyQzBELEVBQVVsRSxjQUFjLHFCQUFxQm1ELE1BQU00SSxRQUFVLE9BQzdENUgsRUFBY2hCLE1BQU1DLFFBQVUsTUFBTSxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvVmFsaWRhdGUuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9jb21wb25lbnRzL0FQSS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy91dGlscy91dGlscy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIGRlZmluaXRpb24pIHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqLCBwcm9wKSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKTsgfSIsImV4cG9ydCBjbGFzcyBWYWxpZGF0ZSB7XG4gIGNvbnN0cnVjdG9yKHNlbGVjdG9ycywgZm9ybVNlbGVjdG9yKSB7XG4gICAgdGhpcy5faW5wdXRzID0gQXJyYXkuZnJvbShcbiAgICAgIGZvcm1TZWxlY3Rvci5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9ycy5pbnB1dFNlbGVjdG9yKVxuICAgICk7XG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gc2VsZWN0b3JzLmlucHV0RXJyb3JDbGFzcztcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gc2VsZWN0b3JzLmVycm9yQ2xhc3M7XG4gICAgdGhpcy5fYnV0dG9uID0gZm9ybVNlbGVjdG9yLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gc2VsZWN0b3JzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvbih0aGlzLl9pbnB1dHMpO1xuICAgIHRoaXMuX2lucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5fdmFsaWRhdGVJbnB1dHMoaW5wdXQpO1xuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b24odGhpcy5faW5wdXRzKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgX3RvZ2dsZUJ1dHRvbihpbnB1dExpc3QpIHtcbiAgICBpZiAodGhpcy5fY2hlY2tJbnZhbGlkKGlucHV0TGlzdCkpIHtcbiAgICAgIHRoaXMuX2J1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICB0aGlzLl9idXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fYnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICB0aGlzLl9idXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB9XG4gIH1cblxuICBfY2hlY2tJbnZhbGlkKGlucHV0TGlzdCkge1xuICAgIHJldHVybiBpbnB1dExpc3Quc29tZSgoaW5wdXQpID0+ICFpbnB1dC52YWxpZGl0eS52YWxpZCk7XG4gIH1cblxuICBfdmFsaWRhdGVJbnB1dHMoaW5wdXQpIHtcbiAgICBjb25zdCBzcGFuRXJyb3IgPSBpbnB1dC5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgaWYgKCFpbnB1dC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgaW5wdXQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgICAgc3BhbkVycm9yLmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XG4gICAgICBzcGFuRXJyb3IudGV4dENvbnRlbnQgPSBpbnB1dC52YWxpZGF0aW9uTWVzc2FnZTtcbiAgICB9IGVsc2Uge1xuICAgICAgaW5wdXQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgICAgc3BhbkVycm9yLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XG4gICAgICBzcGFuRXJyb3IudGV4dENvbnRlbnQgPSBcIlwiO1xuICAgIH1cbiAgfVxufVxuIiwiZXhwb3J0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihjYXJkcywgc2VsZWN0b3IsIGhhbmRsZUNvbmZpcm0sIGN1cnJlbnRVc2VySWQsIGhhbmRsZUxpa2VzKSB7XG4gICAgdGhpcy5fbmFtZSA9IGNhcmRzLm5hbWU7XG4gICAgdGhpcy5fbGluayA9IGNhcmRzLmxpbms7XG4gICAgdGhpcy5fY2FyZElEID0gY2FyZHMuX2lkO1xuICAgIHRoaXMuX293bmVySUQgPSBjYXJkcy5vd25lci5faWQ7XG4gICAgdGhpcy5fbGlrZXMgPSBjYXJkcy5saWtlcztcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBzZWxlY3RvcjtcbiAgICB0aGlzLl9oYW5kbGVDb25maXJtID0gaGFuZGxlQ29uZmlybTtcbiAgICB0aGlzLl9jdXJyZW50VXNlcklkID0gY3VycmVudFVzZXJJZDtcbiAgICB0aGlzLl9oYW5kbGVMaWtlcyA9IGhhbmRsZUxpa2VzO1xuICB9XG5cbiAgX2dldFRlbXBsYXRlKCkge1xuICAgIGNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKS5jb250ZW50O1xuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZFRlbXBsYXRlXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5waG90b19fY2FyZFwiKVxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XG4gIH1cblxuICBfc2V0TGlzdGVuZXJzKCkge1xuICAgIGNvbnN0IGxpa2VCdXR0b24gPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIucGhvdG9fX2xpa2VcIik7XG4gICAgY29uc3QgZGVsZXRlQnV0dG9uID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFwiLnBob3RvX19kZWxldGVcIik7XG4gICAgaWYgKHRoaXMuX293bmVySUQgPT09IHRoaXMuX2N1cnJlbnRVc2VySWQpIHtcbiAgICAgIGRlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9oYW5kbGVDb25maXJtKHRoaXMpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRlbGV0ZUJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7IC8vIEVzY29uZGUgbyBib3RhbyBkZSBkZWxldGFyIGNhc28gdXN1YXJpbyBuYW8gZm9yIG8gZG9ub1xuICAgIH1cblxuICAgIGxpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+XG4gICAgICB0aGlzLl9oYW5kbGVMaWtlcyh0aGlzLl9jYXJkSUQsIHRoaXMuX2NhcmQpXG4gICAgKTtcbiAgfVxuXG4gIHVwZGF0ZUxpa2VzKGRhdGEpIHtcbiAgICBjb25zdCBsaWtlQnV0dG9uID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFwiLnBob3RvX19saWtlXCIpO1xuICAgIGNvbnN0IGxpa2VDb3VudCA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5waG90b19fbGlrZS1jb3VudFwiKTtcblxuICAgIGxpa2VDb3VudC50ZXh0Q29udGVudCA9IGRhdGEubGlrZXMubGVuZ3RoO1xuXG4gICAgaWYgKGRhdGEubGlrZXMuc29tZSgobGlrZSkgPT4gbGlrZS5faWQgPT09IHRoaXMuX2N1cnJlbnRVc2VySWQpKSB7XG4gICAgICBsaWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJwaG90b19fbGlrZV9hY3RpdmVcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxpa2VCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcInBob3RvX19saWtlX2FjdGl2ZVwiKTtcbiAgICB9XG4gIH1cblxuICBnZW5lcmF0ZUNhcmQoKSB7XG4gICAgdGhpcy5fY2FyZCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XG4gICAgdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFwiLnBob3RvX19jYXJkLWltYWdlXCIpLnNyYyA9IHRoaXMuX2xpbms7XG4gICAgdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFwiLnBob3RvX19jYXJkLWltYWdlXCIpLmFsdCA9IHRoaXMuX25hbWU7XG4gICAgdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFwiLnBob3RvX190ZXh0XCIpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcbiAgICB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIucGhvdG9fX2xpa2UtY291bnRcIikudGV4dENvbnRlbnQgPVxuICAgICAgdGhpcy5fbGlrZXMubGVuZ3RoO1xuXG4gICAgaWYgKHRoaXMuX2xpa2VzLnNvbWUoKGxpa2UpID0+IGxpa2UuX2lkID09PSB0aGlzLl9jdXJyZW50VXNlcklkKSkge1xuICAgICAgdGhpcy5fY2FyZFxuICAgICAgICAucXVlcnlTZWxlY3RvcihcIi5waG90b19fbGlrZVwiKVxuICAgICAgICAuY2xhc3NMaXN0LmFkZChcInBob3RvX19saWtlX2FjdGl2ZVwiKTtcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhcIkNhcmQgZ2VuZXJhdGVkOlwiLCB0aGlzLl9jYXJkKTsgLy8gRGVidWcgbG9nXG4gICAgdGhpcy5fc2V0TGlzdGVuZXJzKCk7XG4gICAgcmV0dXJuIHRoaXMuX2NhcmQ7XG4gIH1cblxuICBoYW5kbGVOb1BpY3MoKSB7XG4gICAgY29uc3QgcGljdHVyZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBob3RvX19jYXJkXCIpO1xuICAgIGNvbnN0IGVtcHR5TWVzc2FnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGhvdG9fX2VtcHR5XCIpO1xuICAgIGlmIChwaWN0dXJlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIGRvY3VtZW50XG4gICAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLnBob3RvXCIpXG4gICAgICAgIC5pbnNlcnRBZGphY2VudEhUTUwoXG4gICAgICAgICAgXCJhZnRlcmJlZ2luXCIsXG4gICAgICAgICAgYDxwIGNsYXNzPVwicGhvdG9fX2VtcHR5XCI+Tk8gUElDVFVSRVM8L3A+YFxuICAgICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoZW1wdHlNZXNzYWdlKSB7XG4gICAgICAgIGVtcHR5TWVzc2FnZS5yZW1vdmUoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsImV4cG9ydCBjb25zdCB1c2VybmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudXNlcl9fbmFtZVwiKTtcbmV4cG9ydCBjb25zdCB1c2VyYWJvdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnVzZXJfX3JvbGVcIik7XG5leHBvcnQgY29uc3QgdXNlcmltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi51c2VyX19pbWFnZVwiKTtcbmV4cG9ydCBjb25zdCB1c2VyaW1hZ2VFZGl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi51c2VyX19pbWFnZS1lZGl0XCIpO1xuZXhwb3J0IGNvbnN0IHBhZ2VPcGFjaXR5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wYWdlX19vcGFjaXR5XCIpO1xuZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6IFwiVmFsZSBkZSBZb3NlbWl0ZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS93ZWItY29kZS9tb3ZlZF95b3NlbWl0ZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGFnbyBMb3Vpc2VcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vd2ViLWNvZGUvbW92ZWRfbGFrZS1sb3Vpc2UuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIk1vbnRhbmhhcyBDYXJlY2FzXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3dlYi1jb2RlL21vdmVkX2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYXRlbWFyXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3dlYi1jb2RlL21vdmVkX2xhdGVtYXIuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIlBhcnF1ZSBOYWNpb25hbCBkYSBWYW5vaXNlIFwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS93ZWItY29kZS9tb3ZlZF92YW5vaXNlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS93ZWItY29kZS9tb3ZlZF9sYWdvLmpwZ1wiLFxuICB9LFxuXTtcbmV4cG9ydCBjb25zdCBwaWN0dXJlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucGhvdG9fX2NhcmRcIik7XG5leHBvcnQgY29uc3QgZW1wdHlNZXNzYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5waG90b19fZW1wdHlcIik7XG5leHBvcnQgY29uc3QgdGl0bGVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjVGl0bGVJbnB1dFwiKTtcbmV4cG9ydCBjb25zdCBsaW5rSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI0xpbmtJbnB1dFwiKTtcbmV4cG9ydCBjb25zdCBhYm91dElucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNBYm91dElucHV0XCIpO1xuZXhwb3J0IGNvbnN0IG5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjTmFtZUlucHV0XCIpO1xuZXhwb3J0IGNvbnN0IGZvcm1Qcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNGb3JtUHJvZmlsZVwiKTtcbmV4cG9ydCBjb25zdCBmb3JtVXBsb2FkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNGb3JtVXBsb2FkXCIpO1xuZXhwb3J0IGNvbnN0IGZvcm1FZGl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi51c2VyX19lZGl0XCIpO1xuZXhwb3J0IGNvbnN0IGJ1dHRvbkFkZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudXNlcl9fYWRkXCIpO1xuZXhwb3J0IGNvbnN0IHBob3RvQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5waG90b1wiKTtcbmV4cG9ydCBjb25zdCBmb3JtQ2xvc2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmZvcm1fX2J0bi1jbG9zZVwiKTtcbmV4cG9ydCBjb25zdCBpbWFnZUNsb3NlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2xvc2VcIik7XG5leHBvcnQgY29uc3QgcG9wdXBJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlXCIpO1xuZXhwb3J0IGNvbnN0IHBvcHVwSW1hZ2VTdWJ0aXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLnBvcHVwX19pbWFnZS1zdWJ0aXRsZVwiXG4pO1xuIiwiaW1wb3J0IHsgcGFnZU9wYWNpdHksIGltYWdlQ2xvc2UsIGZvcm1DbG9zZSB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcblxuZXhwb3J0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9pc09wZW4gPSBmYWxzZTtcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XG4gIH1cbiAgb3BlbigpIHtcbiAgICBwYWdlT3BhY2l0eS5jbGFzc0xpc3QuYWRkKFwicGFnZV9fb3BhY2l0eS10b2dnbGVkXCIpO1xuICAgIHBhZ2VPcGFjaXR5LnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICAgIHRoaXMuX2lzT3BlbiA9IHRydWU7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICBwYWdlT3BhY2l0eS5jbGFzc0xpc3QucmVtb3ZlKFwicGFnZV9fb3BhY2l0eS10b2dnbGVkXCIpO1xuICAgIHBhZ2VPcGFjaXR5LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gICAgdGhpcy5faXNPcGVuID0gZmFsc2U7XG4gIH1cblxuICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xuICAgICAgaWYgKHBhZ2VPcGFjaXR5LmNvbnRhaW5zKGV2dC50YXJnZXQpKSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBpbWFnZUNsb3NlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfSk7XG4gICAgZm9ybUNsb3NlLmZvckVhY2goKGJ1dHRvbikgPT4ge1xuICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX3BvcHVwU3VidGl0bGUgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWFnZS1zdWJ0aXRsZVwiKTtcbiAgICB0aGlzLl9wb3B1cEltYWdlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW1hZ2VcIik7XG4gIH1cbiAgb3BlbihpbWFnZVNyYywgdGl0bGUpIHtcbiAgICBzdXBlci5vcGVuKCk7XG4gICAgdGhpcy5fcG9wdXAuc3R5bGUuZGlzcGxheSA9IFwiaW5saW5lLWJsb2NrXCI7XG4gICAgdGhpcy5fcG9wdXBJbWFnZS5zcmMgPSBpbWFnZVNyYztcbiAgICB0aGlzLl9wb3B1cFN1YnRpdGxlLnRleHRDb250ZW50ID0gdGl0bGU7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICBzdXBlci5jbG9zZSgpO1xuICAgIHRoaXMuX3BvcHVwLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICB0aGlzLl9wb3B1cEltYWdlLnNyYyA9IFwiXCI7XG4gICAgdGhpcy5fcG9wdXBTdWJ0aXRsZS50ZXh0Q29udGVudCA9IFwiXCI7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICBpZiAodGhpcy5faXNPcGVuKSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlU3VibWl0KSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5faGFuZGxlU3VibWl0ID0gaGFuZGxlU3VibWl0LmJpbmQodGhpcyk7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvckFsbChcIi5mb3JtX19pbnB1dFwiKTtcbiAgfVxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7fTtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIGlucHV0VmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIGlucHV0VmFsdWVzO1xuICB9XG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgY29uc3QgQ2xvc2VCdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5mb3JtX19idG4tY2xvc2VcIik7XG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICB9KTtcbiAgICBDbG9zZUJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uKSA9PiB7XG4gICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbiAgY2xvc2UoKSB7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgICB0aGlzLl9nZXRJbnB1dFZhbHVlcygpO1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoXCJmb3JtX29wZW5lZFwiKTtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIGlucHV0LnZhbHVlID0gXCJcIjtcbiAgICAgIGNvbnNvbGUubG9nKFwiY2xlYXJlZFwiKTtcbiAgICB9KTtcbiAgfVxuXG4gIG9wZW4oKSB7XG4gICAgc3VwZXIub3BlbigpO1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoXCJmb3JtX29wZW5lZFwiKTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVTdWJtaXQpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9oYW5kbGVTdWJtaXQgPSBoYW5kbGVTdWJtaXQ7XG4gIH1cblxuICBvcGVuKHRhcmdldCkge1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgICB0aGlzLl90YXJnZXQgPSB0YXJnZXQ7XG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZChcImZvcm1fb3BlbmVkXCIpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwiZm9ybV9vcGVuZWRcIik7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9oYW5kbGVTdWJtaXQodGhpcy5fdGFyZ2V0KTtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcih7IG5hbWVTZWxlY3RvciwgYWJvdXRTZWxlY3RvciwgcGljdHVyZVNlbGVjdG9yIH0pIHtcbiAgICB0aGlzLl9uYW1lRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcbiAgICB0aGlzLl9hYm91dEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGFib3V0U2VsZWN0b3IpO1xuICAgIHRoaXMuX3BpY3R1cmVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihwaWN0dXJlU2VsZWN0b3IpO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50LFxuICAgICAgYWJvdXQ6IHRoaXMuX2Fib3V0RWxlbWVudC50ZXh0Q29udGVudCxcbiAgICAgIGF2YXRhcjogdGhpcy5fcGljdHVyZUVsZW1lbnQuc3JjLFxuICAgIH07XG4gIH1cblxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGFib3V0LCBhdmF0YXIgfSkge1xuICAgIGNvbnNvbGUubG9nKFwiU2V0dGluZyB1c2VyIGluZm86XCIsIHsgbmFtZSwgYWJvdXQsIGF2YXRhciB9KTtcbiAgICB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgdGhpcy5fYWJvdXRFbGVtZW50LnRleHRDb250ZW50ID0gYWJvdXQ7XG4gICAgaWYgKGF2YXRhcikge1xuICAgICAgdGhpcy5fcGljdHVyZUVsZW1lbnQuc3JjID0gYXZhdGFyO1xuICAgIH1cbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQVBJIHtcbiAgY29uc3RydWN0b3IoZGF0YSkge1xuICAgIHRoaXMuX3N0YW5kYXJkVXJsID0gZGF0YS51cmw7XG4gICAgdGhpcy5faGVhZGVycyA9IGRhdGEuaGVhZGVycztcbiAgfVxuXG4gIGdldEluaXRpYWxDYXJkcygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fc3RhbmRhcmRVcmx9L2NhcmRzYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJjYXJkcyBsb2FkZWQgc3VjY2Vzc2Z1bGx5XCIpO1xuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgaW4gZ2V0SW5pdGlhbENhcmRzOlwiLCBlcnIpO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgZ2V0VXNlckRhdGEoKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3N0YW5kYXJkVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7XG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBpbiBnZXRVc2VyRGF0YTpcIiwgZXJyKTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycik7XG4gICAgICB9KTtcbiAgfVxuXG4gIHNhdmVQcm9maWxlQ2hhbmdlcyh1c2VyRGF0YSkge1xuICAgIGNvbnNvbGUubG9nKFwiU2F2aW5nIHByb2ZpbGUgY2hhbmdlczpcIiwgdXNlckRhdGEpO1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9zdGFuZGFyZFVybH0vdXNlcnMvbWVgLCB7XG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWU6IHVzZXJEYXRhLm5hbWUsXG4gICAgICAgIGFib3V0OiB1c2VyRGF0YS5hYm91dCxcbiAgICAgIH0pLFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiUmVjZWl2ZWQgcmVzcG9uc2U6XCIsIHJlcyk7XG4gICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGluIHNhdmVQcm9maWxlQ2hhbmdlczpcIiwgZXJyKTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycik7XG4gICAgICB9KTtcbiAgfVxuXG4gIHVwZGF0ZVByb2ZpbGVQaWN0dXJlKHsgYXZhdGFyIH0pIHtcbiAgICBjb25zb2xlLmxvZyhcIlVwZGF0aW5nIHByb2ZpbGUgcGljdHVyZSB3aXRoIFVSTDpcIiwgYXZhdGFyKTtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fc3RhbmRhcmRVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgYXZhdGFyIH0pLFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiUmVjZWl2ZWQgcmVzcG9uc2U6XCIsIHJlcyk7XG4gICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGluIHVwZGF0ZVByb2ZpbGVQaWN0dXJlOlwiLCBlcnIpO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgYWRkQ2FyZChjYXJkRGF0YSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9zdGFuZGFyZFVybH0vY2FyZHNgLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZTogY2FyZERhdGEubmFtZSxcbiAgICAgICAgbGluazogY2FyZERhdGEubGluayxcbiAgICAgIH0pLFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGluIGFkZENhcmQ6XCIsIGVycik7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnIpO1xuICAgICAgfSk7XG4gIH1cblxuICBkZWxldGVDYXJkKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9zdGFuZGFyZFVybH0vY2FyZHMvJHtjYXJkSWR9YCwge1xuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBpbiBkZWxldGVDYXJkOlwiLCBlcnIpO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgYWRkTGlrZShjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fc3RhbmRhcmRVcmx9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgaW4gYWRkTGlrZTpcIiwgZXJyKTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycik7XG4gICAgICB9KTtcbiAgfVxuXG4gIHJlbW92ZUxpa2UoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3N0YW5kYXJkVXJsfS9jYXJkcy9saWtlcy8ke2NhcmRJZH1gLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGluIHJlbW92ZUxpa2U6XCIsIGVycik7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnIpO1xuICAgICAgfSk7XG4gIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyBkYXRhLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xuICAgIHRoaXMuX3JlbmRlckxpc3QgPSBkYXRhO1xuICAgIHRoaXMuX3JlbmRlck1ldGhvZCA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX3JlbmRlckNvbnRhaW5lciA9IGNvbnRhaW5lclNlbGVjdG9yO1xuICB9XG5cbiAgX2NsZWFyQ29udGFpbmVyKCkge1xuICAgIHRoaXMuX3JlbmRlckNvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiO1xuICB9XG5cbiAgcmVuZGVySXRlbSgpIHtcbiAgICB0aGlzLl9jbGVhckNvbnRhaW5lcigpO1xuICAgIHRoaXMuX3JlbmRlckxpc3QuZm9yRWFjaCgoaSkgPT4ge1xuICAgICAgdGhpcy5fcmVuZGVyTWV0aG9kKGkpO1xuICAgIH0pO1xuICB9XG5cbiAgc2V0SXRlbShpKSB7XG4gICAgdGhpcy5fcmVuZGVyQ29udGFpbmVyLnByZXBlbmQoaSk7XG4gIH1cbn1cbiIsImltcG9ydCB7IENhcmQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcbmltcG9ydCB7IFBvcHVwV2l0aENvbmZpcm1hdGlvbiwgUG9wdXBXaXRoSW1hZ2UgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cC5qc1wiO1xuaW1wb3J0IHsgcGhvdG9Db250YWluZXIsIHVzZXJpbWFnZSwgdXNlcmltYWdlRWRpdCB9IGZyb20gXCIuL2NvbnN0YW50cy5qc1wiO1xuaW1wb3J0IEFQSSBmcm9tIFwiLi4vY29tcG9uZW50cy9BUEkuanNcIjtcbmltcG9ydCB7IFNlY3Rpb24gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgeyBwb3B1cENvbmZpcm1hdGlvbiB9IGZyb20gXCIuLi9wYWdlcy9pbmRleC5qc1wiO1xuXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XG4gIG5hbWVTZWxlY3RvcjogXCIudXNlcl9fbmFtZVwiLFxuICBhYm91dFNlbGVjdG9yOiBcIi51c2VyX19yb2xlXCIsXG4gIHBpY3R1cmVTZWxlY3RvcjogXCIudXNlcl9faW1hZ2UtbWFpblwiLFxufSk7XG5jb25zdCBVdGlsQVBJID0gbmV3IEFQSSh7XG4gIHVybDogXCJodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL3dlYi1wdGJyLWNvaG9ydC0xMVwiLFxuICBoZWFkZXJzOiB7XG4gICAgYXV0aG9yaXphdGlvbjogXCJlZjYxYWY3Zi02MmJkLTQyYzYtYWM2NC1kZTJkMjczMTI5MmJcIixcbiAgICBcIkNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgfSxcbn0pO1xuXG5leHBvcnQgZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQoaW5wdXRWYWx1ZXMpIHtcbiAgcmVuZGVyTG9hZCh0cnVlLCBcIiNVc2VyVXBsb2FkQnV0dG9uXCIpO1xuICBjb25zb2xlLmxvZyhcIlN1Ym1pdHRpbmcgcHJvZmlsZSBmb3JtIHdpdGggdmFsdWVzOlwiLCBpbnB1dFZhbHVlcyk7XG4gIGlmIChpbnB1dFZhbHVlcy5uYW1lICE9PSBcIlwiICYmIGlucHV0VmFsdWVzLmFib3V0ICE9PSBcIlwiKSB7XG4gICAgY29uc29sZS5sb2coaW5wdXRWYWx1ZXMpO1xuICAgIHRoaXMuY2xvc2UoKTtcbiAgICByZXR1cm4gVXRpbEFQSS5zYXZlUHJvZmlsZUNoYW5nZXMoaW5wdXRWYWx1ZXMpXG4gICAgICAudGhlbigodXNlckRhdGEpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coXCJQcm9maWxlIGNoYW5nZXMgc2F2ZWQgc3VjY2Vzc2Z1bGx5OlwiLCB1c2VyRGF0YSk7XG4gICAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHVzZXJEYXRhKTtcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNGb3JtUHJvZmlsZVwiKS5jbGFzc0xpc3QucmVtb3ZlKFwiZm9ybV9vcGVuZWRcIik7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBzYXZlIHByb2ZpbGUgY2hhbmdlczpcIiwgZXJyKTtcbiAgICAgIH0pXG4gICAgICAuZmluYWxseSgoKSA9PiByZW5kZXJMb2FkKGZhbHNlLCBcIiNVc2VyVXBsb2FkQnV0dG9uXCIpKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoXCJJbnZhbGlkIGlucHV0IHZhbHVlc1wiKTtcbiAgfVxufVxuXG5jb25zdCBQcm9maWxlQ2FyZHMgPSBuZXcgU2VjdGlvbihcbiAge1xuICAgIGRhdGE6IFtdLFxuICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xuICAgICAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGl0ZW0sIFwiI2NhcmQtdGVtcGxhdGVcIiwgaGFuZGxlQ2FyZENsaWNrKTtcbiAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcbiAgICAgIFByb2ZpbGVDYXJkcy5zZXRJdGVtKGNhcmRFbGVtZW50KTtcbiAgICB9LFxuICB9LFxuICBwaG90b0NvbnRhaW5lclxuKTtcblxuZXhwb3J0IGZ1bmN0aW9uIGhhbmRsZVVwbG9hZEZvcm1TdWJtaXQoaW5wdXRWYWx1ZXMsIGN1cnJlbnRVc2VySWQpIHtcbiAgcmVuZGVyTG9hZCh0cnVlLCBcIiNDYXJkVXBsb2FkQnV0dG9uXCIpO1xuICBpZiAoaW5wdXRWYWx1ZXMudXJsICE9PSBcIlwiICYmIGlucHV0VmFsdWVzLnRpdGxlICE9PSBcIlwiKSB7XG4gICAgY29uc3QgbmV3Q2FyZCA9IHtcbiAgICAgIG5hbWU6IGlucHV0VmFsdWVzLnRpdGxlLFxuICAgICAgbGluazogaW5wdXRWYWx1ZXMudXJsLFxuICAgIH07XG5cbiAgICBVdGlsQVBJLmFkZENhcmQobmV3Q2FyZClcbiAgICAgIC50aGVuKChhZGRlZENhcmQpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coXCJOZXcgY2FyZCBhZGRlZDpcIiwgYWRkZWRDYXJkKTtcbiAgICAgICAgYWRkZWRDYXJkLm93bmVyID0geyBfaWQ6IGN1cnJlbnRVc2VySWQgfTsgLy8gRGVmaW5lIElEIGRvIG93bmVyIHBybyBJRCBkbyB1c3VhcmlvIGF0dWFsXG4gICAgICAgIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcbiAgICAgICAgICBhZGRlZENhcmQsXG4gICAgICAgICAgXCIjY2FyZC10ZW1wbGF0ZVwiLFxuICAgICAgICAgIChjYXJkSW5zdGFuY2UpID0+IHBvcHVwQ29uZmlybWF0aW9uLm9wZW4oY2FyZEluc3RhbmNlKSxcbiAgICAgICAgICBjdXJyZW50VXNlcklkLFxuICAgICAgICAgIGhhbmRsZUxpa2VzXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5waG90b1wiKS5wcmVwZW5kKGNhcmRFbGVtZW50KTtcbiAgICAgICAgc2V0dXBQb3B1cHMoXCIucGhvdG9fX2NhcmRcIik7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGFkZCBuZXcgY2FyZDpcIiwgZXJyKTtcbiAgICAgIH0pXG4gICAgICAuZmluYWxseSgoKSA9PiByZW5kZXJMb2FkKGZhbHNlLCBcIiNDYXJkVXBsb2FkQnV0dG9uXCIpKTtcbiAgfSBlbHNlIHtcbiAgICBjb25zb2xlLmVycm9yKFwiVGl0bGUgYW5kIFVSTCBjYW5ub3QgYmUgZW1wdHlcIik7XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IGhhbmRsZUNvbmZpcm1hdGlvblN1Ym1pdCA9ICh0YXJnZXQpID0+IHtcbiAgVXRpbEFQSS5kZWxldGVDYXJkKHRhcmdldC5fY2FyZElEKVxuICAgIC50aGVuKCgpID0+IHtcbiAgICAgIHRhcmdldC5fY2FyZC5yZW1vdmUoKTsgLy8gUmVtb3ZlIGEgY2FydGEgZG8gRG9tXG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICB9KTtcbiAgcG9wdXBDb25maXJtYXRpb24uY2xvc2UoKTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVMaWtlcyhjYXJkSWQsIGNhcmRFbGVtZW50KSB7XG4gIGNvbnN0IGxpa2VCdXR0b24gPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBob3RvX19saWtlXCIpO1xuICBjb25zdCBsaWtlQ291bnQgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBob3RvX19saWtlLWNvdW50XCIpO1xuXG4gIGlmIChsaWtlQnV0dG9uLmNsYXNzTGlzdC5jb250YWlucyhcInBob3RvX19saWtlX2FjdGl2ZVwiKSkge1xuICAgIFV0aWxBUEkucmVtb3ZlTGlrZShjYXJkSWQpXG4gICAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICBsaWtlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJwaG90b19fbGlrZV9hY3RpdmVcIik7XG4gICAgICAgIGxpa2VDb3VudC50ZXh0Q29udGVudCA9IGRhdGEubGlrZXMubGVuZ3RoO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIFV0aWxBUEkuYWRkTGlrZShjYXJkSWQpXG4gICAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICBsaWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJwaG90b19fbGlrZV9hY3RpdmVcIik7XG4gICAgICAgIGxpa2VDb3VudC50ZXh0Q29udGVudCA9IGRhdGEubGlrZXMubGVuZ3RoO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgIH0pO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXR1cFBvcHVwcyhjYXJkKSB7XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY2FyZCkuZm9yRWFjaCgoaSkgPT5cbiAgICBpLnF1ZXJ5U2VsZWN0b3IoXCIucGhvdG9fX2NhcmQtaW1hZ2VcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIGNvbnN0IEltZ1NyYyA9IGkucXVlcnlTZWxlY3RvcihcIi5waG90b19fY2FyZC1pbWFnZVwiKS5zcmM7XG4gICAgICBjb25zdCB0aXRsZSA9IGkucXVlcnlTZWxlY3RvcihcIi5waG90b19fdGV4dFwiKS50ZXh0Q29udGVudDtcbiAgICAgIGNvbnN0IHBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiLnBvcHVwXCIpO1xuICAgICAgcG9wdXAub3BlbihJbWdTcmMsIHRpdGxlKTtcbiAgICAgIHBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKFwiLnBob3RvX19jYXJkXCIpO1xuICAgIH0pXG4gICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXR1cFByb2ZpbGVFZGl0KCkge1xuICB1c2VyaW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3ZlclwiLCAoKSA9PiB7XG4gICAgdXNlcmltYWdlLnF1ZXJ5U2VsZWN0b3IoXCIudXNlcl9faW1hZ2UtbWFpblwiKS5zdHlsZS5vcGFjaXR5ID0gXCIyNSVcIjtcbiAgICB1c2VyaW1hZ2VFZGl0LnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gIH0pO1xuICB1c2VyaW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3V0XCIsICgpID0+IHtcbiAgICB1c2VyaW1hZ2UucXVlcnlTZWxlY3RvcihcIi51c2VyX19pbWFnZS1tYWluXCIpLnN0eWxlLm9wYWNpdHkgPSBcIjEwMCVcIjtcbiAgICB1c2VyaW1hZ2VFZGl0LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZW5kZXJMb2FkKHN0YXR1cywgc2VsZWN0b3IpIHtcbiAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xuICBpZiAoIWVsZW1lbnQpIHtcbiAgICBjb25zb2xlLmVycm9yKGBFbGVtZW50IHdpdGggc2VsZWN0b3IgJHtzZWxlY3Rvcn0gbm90IGZvdW5kYCk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKHN0YXR1cykge1xuICAgIGVsZW1lbnQudGV4dENvbnRlbnQgKz0gXCIuLi5cIjtcbiAgfSBlbHNlIHtcbiAgICBlbGVtZW50LnRleHRDb250ZW50ID0gZWxlbWVudC50ZXh0Q29udGVudC5yZXBsYWNlKFwiLi4uXCIsIFwiXCIpO1xuICB9XG59XG4iLCJpbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xuaW1wb3J0IHsgVmFsaWRhdGUgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9WYWxpZGF0ZS5qc1wiO1xuaW1wb3J0IHsgQ2FyZCB9IGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCB7IFBvcHVwV2l0aENvbmZpcm1hdGlvbiwgUG9wdXBXaXRoRm9ybSB9IGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwLmpzXCI7XG5pbXBvcnQge1xuICBoYW5kbGVVcGxvYWRGb3JtU3VibWl0LFxuICBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdCxcbiAgc2V0dXBQb3B1cHMsXG4gIHNldHVwUHJvZmlsZUVkaXQsXG4gIHJlbmRlckxvYWQsXG4gIGhhbmRsZUNvbmZpcm1hdGlvblN1Ym1pdCxcbiAgaGFuZGxlTGlrZXMsXG59IGZyb20gXCIuLi91dGlscy91dGlscy5qc1wiO1xuaW1wb3J0IHtcbiAgZm9ybVByb2ZpbGUsXG4gIGZvcm1VcGxvYWQsXG4gIGZvcm1FZGl0LFxuICBidXR0b25BZGQsXG4gIHBob3RvQ29udGFpbmVyLFxuICB1c2VyaW1hZ2UsXG4gIG5hbWVJbnB1dCxcbiAgYWJvdXRJbnB1dCxcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuaW1wb3J0IHsgU2VjdGlvbiB9IGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IEFQSSBmcm9tIFwiLi4vY29tcG9uZW50cy9BUEkuanNcIjtcblxuY29uc3QgYXBpID0gbmV3IEFQSSh7XG4gIHVybDogXCJodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL3dlYi1wdGJyLWNvaG9ydC0xMVwiLFxuICBoZWFkZXJzOiB7XG4gICAgYXV0aG9yaXphdGlvbjogXCJlZjYxYWY3Zi02MmJkLTQyYzYtYWM2NC1kZTJkMjczMTI5MmJcIixcbiAgICBcIkNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgfSxcbn0pO1xuXG5jb25zdCBVc2VyVmFsdWVzID0gbmV3IFVzZXJJbmZvKHtcbiAgbmFtZVNlbGVjdG9yOiBcIi51c2VyX19uYW1lXCIsXG4gIGFib3V0U2VsZWN0b3I6IFwiLnVzZXJfX3JvbGVcIixcbiAgcGljdHVyZVNlbGVjdG9yOiBcIi51c2VyX19pbWFnZS1tYWluXCIsXG59KTtcblxuZXhwb3J0IGNvbnN0IHBvcHVwQ29uZmlybWF0aW9uID0gbmV3IFBvcHVwV2l0aENvbmZpcm1hdGlvbihcbiAgXCIjU3VibWl0Q2hlY2tcIixcbiAgaGFuZGxlQ29uZmlybWF0aW9uU3VibWl0XG4pO1xucG9wdXBDb25maXJtYXRpb24uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxubGV0IGN1cnJlbnRVc2VySWQ7XG5cbmFwaVxuICAuZ2V0VXNlckRhdGEoKVxuICAudGhlbigodXNlckRhdGEpID0+IHtcbiAgICBVc2VyVmFsdWVzLnNldFVzZXJJbmZvKHVzZXJEYXRhKTtcbiAgICBjdXJyZW50VXNlcklkID0gdXNlckRhdGEuX2lkO1xuXG4gICAgYXBpXG4gICAgICAuZ2V0SW5pdGlhbENhcmRzKClcbiAgICAgIC50aGVuKChjYXJkcykgPT4ge1xuICAgICAgICBjb25zdCBQcm9maWxlQ2FyZHMgPSBuZXcgU2VjdGlvbihcbiAgICAgICAgICB7XG4gICAgICAgICAgICBkYXRhOiBjYXJkcyxcbiAgICAgICAgICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBjYXJkID0gbmV3IENhcmQoXG4gICAgICAgICAgICAgICAgaXRlbSxcbiAgICAgICAgICAgICAgICBcIiNjYXJkLXRlbXBsYXRlXCIsXG4gICAgICAgICAgICAgICAgKGNhcmRJbnN0YW5jZSkgPT4gcG9wdXBDb25maXJtYXRpb24ub3BlbihjYXJkSW5zdGFuY2UpLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRVc2VySWQsXG4gICAgICAgICAgICAgICAgaGFuZGxlTGlrZXNcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xuICAgICAgICAgICAgICBQcm9maWxlQ2FyZHMuc2V0SXRlbShjYXJkRWxlbWVudCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAgcGhvdG9Db250YWluZXJcbiAgICAgICAgKTtcbiAgICAgICAgUHJvZmlsZUNhcmRzLnJlbmRlckl0ZW0oKTtcbiAgICAgICAgc2V0dXBQb3B1cHMoXCIucGhvdG9fX2NhcmRcIik7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBsb2FkIGluaXRpYWwgY2FyZHM6XCIsIGVycik7XG4gICAgICB9KTtcbiAgfSlcbiAgLmNhdGNoKChlcnIpID0+IHtcbiAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGZldGNoIHVzZXIgZGF0YTpcIiwgZXJyKTtcbiAgfSk7XG5cbmNvbnN0IGZvcm1Qcm9maWxlVmFsaWRhdG9yID0gbmV3IFZhbGlkYXRlKFxuICB7XG4gICAgaW5wdXRTZWxlY3RvcjogXCIuZm9ybV9faW5wdXRcIixcbiAgICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIuZm9ybV9fYnV0dG9uXCIsXG4gICAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJmb3JtX19idXR0b24tZGlzYWJsZWRcIixcbiAgICBpbnB1dEVycm9yQ2xhc3M6IFwiZm9ybV9faW5wdXQtaW52YWxpZFwiLFxuICAgIGVycm9yQ2xhc3M6IFwiZm9ybV9faW5wdXQtZXJyb3JcIixcbiAgfSxcbiAgZm9ybVByb2ZpbGVcbik7XG5mb3JtUHJvZmlsZVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbmNvbnN0IGZvcm1VcGxvYWRWYWxpZGF0b3IgPSBuZXcgVmFsaWRhdGUoXG4gIHtcbiAgICBpbnB1dFNlbGVjdG9yOiBcIi5mb3JtX19pbnB1dFwiLFxuICAgIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5mb3JtX19idXR0b25cIixcbiAgICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcImZvcm1fX2J1dHRvbi1kaXNhYmxlZFwiLFxuICAgIGlucHV0RXJyb3JDbGFzczogXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIsXG4gICAgZXJyb3JDbGFzczogXCJmb3JtX19pbnB1dC1lcnJvclwiLFxuICB9LFxuICBmb3JtVXBsb2FkXG4pO1xuZm9ybVVwbG9hZFZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbmNvbnN0IHBvcHVwUHJvZmlsZSA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiI0Zvcm1Qcm9maWxlXCIsIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KTtcbnBvcHVwUHJvZmlsZS5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBwb3B1cFVwbG9hZCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiI0Zvcm1VcGxvYWRcIiwgaGFuZGxlVXBsb2FkRm9ybVN1Ym1pdCk7XG5wb3B1cFVwbG9hZC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5mb3JtRWRpdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBwb3B1cFByb2ZpbGUub3BlbigpO1xuICBjb25zdCBjdXJyZW50VmFsdWVzID0gVXNlclZhbHVlcy5nZXRVc2VySW5mbygpO1xuICBuYW1lSW5wdXQudmFsdWUgPSBjdXJyZW50VmFsdWVzLm5hbWU7XG4gIGFib3V0SW5wdXQudmFsdWUgPSBjdXJyZW50VmFsdWVzLmFib3V0O1xufSk7XG5idXR0b25BZGQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgcG9wdXBVcGxvYWQub3BlbigpO1xufSk7XG5cbmNvbnN0IGhhbmRsZUF2YXRhckZvcm1TdWJtaXQgPSAoaW5wdXRWYWx1ZXMpID0+IHtcbiAgcmVuZGVyTG9hZCh0cnVlLCBcIiNQaWN0dXJlVXBsb2FkQnV0dG9uXCIpO1xuICBjb25zdCBhdmF0YXJVcmwgPSBpbnB1dFZhbHVlcy5wcm9maWxlVXJsO1xuICBhcGlcbiAgICAudXBkYXRlUHJvZmlsZVBpY3R1cmUoeyBhdmF0YXI6IGF2YXRhclVybCB9KVxuICAgIC50aGVuKCh1c2VyRGF0YSkgPT4ge1xuICAgICAgVXNlclZhbHVlcy5zZXRVc2VySW5mbyh7IC4uLnVzZXJEYXRhLCBhdmF0YXI6IHVzZXJEYXRhLmF2YXRhciB9KTtcbiAgICAgIHBvcHVwQXZhdGFyLmNsb3NlKCk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byB1cGRhdGUgcHJvZmlsZSBwaWN0dXJlOlwiLCBlcnIpO1xuICAgIH0pXG4gICAgLmZpbmFsbHkoKCkgPT4gcmVuZGVyTG9hZChmYWxzZSwgXCIjUGljdHVyZVVwbG9hZEJ1dHRvblwiKSk7XG59O1xuXG5jb25zdCBwb3B1cEF2YXRhciA9IG5ldyBQb3B1cFdpdGhGb3JtKFxuICBcIiNGb3JtUHJvZmlsZVBpY3R1cmVcIixcbiAgaGFuZGxlQXZhdGFyRm9ybVN1Ym1pdFxuKTtcbnBvcHVwQXZhdGFyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IGZvcm1BdmF0YXJWYWxpZGF0b3IgPSBuZXcgVmFsaWRhdGUoXG4gIHtcbiAgICBpbnB1dFNlbGVjdG9yOiBcIi5mb3JtX19pbnB1dFwiLFxuICAgIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5mb3JtX19idXR0b25cIixcbiAgICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcImZvcm1fX2J1dHRvbi1kaXNhYmxlZFwiLFxuICAgIGlucHV0RXJyb3JDbGFzczogXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIsXG4gICAgZXJyb3JDbGFzczogXCJmb3JtX19pbnB1dC1lcnJvclwiLFxuICB9LFxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI0Zvcm1Qcm9maWxlUGljdHVyZVwiKVxuKTtcbmZvcm1BdmF0YXJWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG51c2VyaW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgcG9wdXBBdmF0YXIub3BlbigpO1xufSk7XG5cbnNldHVwUHJvZmlsZUVkaXQocG9wdXBBdmF0YXIpO1xuIl0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJleHBvcnRzIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiVmFsaWRhdGUiLCJjb25zdHJ1Y3RvciIsInNlbGVjdG9ycyIsImZvcm1TZWxlY3RvciIsInRoaXMiLCJfaW5wdXRzIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImlucHV0U2VsZWN0b3IiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2J1dHRvbiIsInF1ZXJ5U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImVuYWJsZVZhbGlkYXRpb24iLCJfdG9nZ2xlQnV0dG9uIiwiZm9yRWFjaCIsImlucHV0IiwiYWRkRXZlbnRMaXN0ZW5lciIsIl92YWxpZGF0ZUlucHV0cyIsImlucHV0TGlzdCIsIl9jaGVja0ludmFsaWQiLCJkaXNhYmxlZCIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsInNvbWUiLCJ2YWxpZGl0eSIsInZhbGlkIiwic3BhbkVycm9yIiwibmV4dEVsZW1lbnRTaWJsaW5nIiwidGV4dENvbnRlbnQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIkNhcmQiLCJjYXJkcyIsInNlbGVjdG9yIiwiaGFuZGxlQ29uZmlybSIsImN1cnJlbnRVc2VySWQiLCJoYW5kbGVMaWtlcyIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9jYXJkSUQiLCJfaWQiLCJfb3duZXJJRCIsIm93bmVyIiwiX2xpa2VzIiwibGlrZXMiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUNvbmZpcm0iLCJfY3VycmVudFVzZXJJZCIsIl9oYW5kbGVMaWtlcyIsIl9nZXRUZW1wbGF0ZSIsImRvY3VtZW50IiwiY29udGVudCIsImNsb25lTm9kZSIsIl9zZXRMaXN0ZW5lcnMiLCJsaWtlQnV0dG9uIiwiX2NhcmQiLCJkZWxldGVCdXR0b24iLCJzdHlsZSIsImRpc3BsYXkiLCJ1cGRhdGVMaWtlcyIsImRhdGEiLCJsZW5ndGgiLCJsaWtlIiwiZ2VuZXJhdGVDYXJkIiwic3JjIiwiYWx0IiwiY29uc29sZSIsImxvZyIsImhhbmRsZU5vUGljcyIsInBpY3R1cmVzIiwiZW1wdHlNZXNzYWdlIiwiaW5zZXJ0QWRqYWNlbnRIVE1MIiwidXNlcmltYWdlIiwidXNlcmltYWdlRWRpdCIsInBhZ2VPcGFjaXR5IiwiYWJvdXRJbnB1dCIsIm5hbWVJbnB1dCIsImZvcm1Qcm9maWxlIiwiZm9ybVVwbG9hZCIsImZvcm1FZGl0IiwiYnV0dG9uQWRkIiwicGhvdG9Db250YWluZXIiLCJmb3JtQ2xvc2UiLCJpbWFnZUNsb3NlIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwIiwiX2lzT3BlbiIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJvcGVuIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZ0Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJjb250YWlucyIsInRhcmdldCIsImJ1dHRvbiIsIlBvcHVwV2l0aEltYWdlIiwic3VwZXIiLCJfcG9wdXBTdWJ0aXRsZSIsIl9wb3B1cEltYWdlIiwiaW1hZ2VTcmMiLCJ0aXRsZSIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVTdWJtaXQiLCJfaGFuZGxlU3VibWl0IiwiX2lucHV0TGlzdCIsIl9nZXRJbnB1dFZhbHVlcyIsImlucHV0VmFsdWVzIiwidmFsdWUiLCJDbG9zZUJ1dHRvbnMiLCJwcmV2ZW50RGVmYXVsdCIsIlVzZXJJbmZvIiwibmFtZVNlbGVjdG9yIiwiYWJvdXRTZWxlY3RvciIsInBpY3R1cmVTZWxlY3RvciIsIl9uYW1lRWxlbWVudCIsIl9hYm91dEVsZW1lbnQiLCJfcGljdHVyZUVsZW1lbnQiLCJnZXRVc2VySW5mbyIsImFib3V0IiwiYXZhdGFyIiwic2V0VXNlckluZm8iLCJBUEkiLCJfc3RhbmRhcmRVcmwiLCJ1cmwiLCJfaGVhZGVycyIsImhlYWRlcnMiLCJnZXRJbml0aWFsQ2FyZHMiLCJmZXRjaCIsInRoZW4iLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiY2F0Y2giLCJlcnIiLCJlcnJvciIsImdldFVzZXJEYXRhIiwic2F2ZVByb2ZpbGVDaGFuZ2VzIiwidXNlckRhdGEiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInVwZGF0ZVByb2ZpbGVQaWN0dXJlIiwiYWRkQ2FyZCIsImNhcmREYXRhIiwiZGVsZXRlQ2FyZCIsImNhcmRJZCIsImFkZExpa2UiLCJyZW1vdmVMaWtlIiwiU2VjdGlvbiIsInJlbmRlcmVyIiwiY29udGFpbmVyU2VsZWN0b3IiLCJfcmVuZGVyTGlzdCIsIl9yZW5kZXJNZXRob2QiLCJfcmVuZGVyQ29udGFpbmVyIiwiX2NsZWFyQ29udGFpbmVyIiwiaW5uZXJIVE1MIiwicmVuZGVySXRlbSIsImkiLCJzZXRJdGVtIiwicHJlcGVuZCIsInVzZXJJbmZvIiwiVXRpbEFQSSIsImF1dGhvcml6YXRpb24iLCJQcm9maWxlQ2FyZHMiLCJpdGVtIiwiY2FyZEVsZW1lbnQiLCJoYW5kbGVDYXJkQ2xpY2siLCJsaWtlQ291bnQiLCJzZXR1cFBvcHVwcyIsImNhcmQiLCJzdG9wUHJvcGFnYXRpb24iLCJJbWdTcmMiLCJwb3B1cCIsInJlbmRlckxvYWQiLCJlbGVtZW50IiwicmVwbGFjZSIsImFwaSIsIlVzZXJWYWx1ZXMiLCJwb3B1cENvbmZpcm1hdGlvbiIsIl90YXJnZXQiLCJjYXJkSW5zdGFuY2UiLCJwb3B1cFByb2ZpbGUiLCJmaW5hbGx5IiwicG9wdXBVcGxvYWQiLCJuZXdDYXJkIiwiYWRkZWRDYXJkIiwiY3VycmVudFZhbHVlcyIsInBvcHVwQXZhdGFyIiwiYXZhdGFyVXJsIiwicHJvZmlsZVVybCIsIm9wYWNpdHkiXSwic291cmNlUm9vdCI6IiJ9