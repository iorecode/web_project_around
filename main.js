!function(){"use strict";var e={d:function(t,r){for(var o in r)e.o(r,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:r[o]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}};e.d({},{M:function(){return U}});class t{constructor(e,t){this._inputs=Array.from(t.querySelectorAll(e.inputSelector)),this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._button=t.querySelector(e.submitButtonSelector),this._inactiveButtonClass=e.inactiveButtonClass}enableValidation(){this._toggleButton(this._inputs),this._inputs.forEach((e=>{e.addEventListener("input",(()=>{this._validateInputs(e),this._toggleButton(this._inputs)}))}))}_toggleButton(e){this._checkInvalid(e)?(this._button.disabled=!0,this._button.classList.add(this._inactiveButtonClass)):(this._button.disabled=!1,this._button.classList.remove(this._inactiveButtonClass))}_checkInvalid(e){return e.some((e=>!e.validity.valid))}_validateInputs(e){const t=e.nextElementSibling;e.validity.valid?(e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""):(e.classList.add(this._inputErrorClass),t.classList.add(this._errorClass),t.textContent=e.validationMessage)}resetValidation(){this._inputs.forEach((e=>{e.classList.remove(this._inputErrorClass);const t=e.nextElementSibling;t.classList.remove(this._errorClass),t.textContent=""})),this._toggleButton(this._inputs)}}class r{constructor(e,t,r,o,s){this._name=e.name,this._link=e.link,this._cardID=e._id,this._ownerID=e.owner._id,this._likes=e.likes,this._cardSelector=t,this._handleConfirm=r,this._currentUserId=o,this._handleLikes=s}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".photo__card").cloneNode(!0)}_setListeners(){const e=this._card.querySelector(".photo__like"),t=this._card.querySelector(".photo__delete");this._ownerID===this._currentUserId?t.addEventListener("click",(()=>{this._handleConfirm(this)})):t.style.display="none",e.addEventListener("click",(()=>this._handleLikes(this._cardID,this._card)))}updateLikes(e){const t=this._card.querySelector(".photo__like");this._card.querySelector(".photo__like-count").textContent=e.likes.length,e.likes.some((e=>e._id===this._currentUserId))?t.classList.add("photo__like_active"):t.classList.remove("photo__like_active")}generateCard(){return this._card=this._getTemplate(),this._card.querySelector(".photo__card-image").src=this._link,this._card.querySelector(".photo__card-image").alt=this._name,this._card.querySelector(".photo__text").textContent=this._name,this._card.querySelector(".photo__like-count").textContent=this._likes.length,this._likes.some((e=>e._id===this._currentUserId))&&this._card.querySelector(".photo__like").classList.add("photo__like_active"),console.log("Card generated:",this._card),this._setListeners(),this._card}handleNoPics(){const e=document.querySelectorAll(".photo__card"),t=document.querySelector(".photo__empty");0===e.length?document.querySelector(".photo").insertAdjacentHTML("afterbegin",'<p class="photo__empty">NO PICTURES</p>'):t&&t.remove()}}document.querySelector(".user__name"),document.querySelector(".user__role");const o=document.querySelector(".user__image"),s=document.querySelector(".user__image-edit"),n=document.querySelector(".page__opacity"),i=(document.querySelectorAll(".photo__card"),document.querySelector(".photo__empty"),document.querySelector("#TitleInput"),document.querySelector("#LinkInput"),document.querySelector("#AboutInput")),a=document.querySelector("#NameInput"),c=document.querySelector("#FormProfile"),l=document.querySelector("#FormUpload"),d=document.querySelector(".user__edit"),u=document.querySelector(".user__add"),_=document.querySelector(".photo"),h=document.querySelectorAll(".form__btn-close"),p=document.querySelector(".popup__close");document.querySelector(".popup__image"),document.querySelector(".popup__image-subtitle");class m{constructor(e){this._popup=document.querySelector(e),this._isOpen=!1,this._handleEscClose=this._handleEscClose.bind(this)}open(){n.classList.add("page__opacity-toggled"),n.style.display="block",document.addEventListener("keydown",this._handleEscClose),this._isOpen=!0}close(){n.classList.remove("page__opacity-toggled"),n.style.display="none",document.removeEventListener("keydown",this._handleEscClose),this._isOpen=!1}_handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){document.addEventListener("click",(e=>{n.contains(e.target)&&this.close()})),p.addEventListener("click",(()=>{this.close()})),h.forEach((e=>{e.addEventListener("click",(()=>{this.close()}))}))}}class v extends m{constructor(e){super(e),this._popupSubtitle=this._popup.querySelector(".popup__image-subtitle"),this._popupImage=this._popup.querySelector(".popup__image")}open(e,t){super.open(),this._popup.style.display="inline-block",this._popupImage.src=e,this._popupSubtitle.textContent=t}close(){super.close(),this._popup.style.display="none",this._popupImage.src="",this._popupSubtitle.textContent=""}setEventListeners(){super.setEventListeners(),document.addEventListener("click",(()=>{this._isOpen&&this.close()}))}}class y extends m{constructor(e,t,r){super(e),this._handleSubmit=t.bind(this),this._inputList=this._popup.querySelectorAll(".form__input"),this._validator=r}_getInputValues(){const e={};return this._inputList.forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){super.setEventListeners();const e=document.querySelectorAll(".form__btn-close");this._popup.addEventListener("submit",(e=>{e.preventDefault(),this._handleSubmit(this._getInputValues())})),e.forEach((e=>{e.addEventListener("click",(()=>{this.close()}))}))}close(){super.close(),this._getInputValues(),this._popup.classList.remove("form_opened"),this._inputList.forEach((e=>{e.value="",console.log("cleared")}))}open(){super.open(),this._popup.classList.add("form_opened"),this._validator.resetValidation()}}class f{constructor({nameSelector:e,aboutSelector:t,pictureSelector:r}){this._nameElement=document.querySelector(e),this._aboutElement=document.querySelector(t),this._pictureElement=document.querySelector(r)}getUserInfo(){return{name:this._nameElement.textContent,about:this._aboutElement.textContent,avatar:this._pictureElement.src}}setUserInfo({name:e,about:t,avatar:r}){console.log("Setting user info:",{name:e,about:t,avatar:r}),this._nameElement.textContent=e,this._aboutElement.textContent=t,r&&(this._pictureElement.src=r)}}class S{constructor(e){this._standardUrl=e.url,this._headers=e.headers}getInitialCards(){return fetch(`${this._standardUrl}/cards`,{headers:this._headers}).then((e=>e.ok?(console.log("cards loaded successfully"),e.json()):Promise.reject(`Error: ${e.status}`))).catch((e=>(console.error("Error in getInitialCards:",e),Promise.reject(e))))}getUserData(){return fetch(`${this._standardUrl}/users/me`,{headers:this._headers}).then((e=>e.ok?(console.log(e),e.json()):Promise.reject(`Error: ${e.status}`))).catch((e=>(console.error("Error in getUserData:",e),Promise.reject(e))))}saveProfileChanges(e){return console.log("Saving profile changes:",e),fetch(`${this._standardUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.name,about:e.about})}).then((e=>(console.log("Received response:",e),e.ok?e.json():Promise.reject(`Error: ${e.status}`)))).catch((e=>(console.error("Error in saveProfileChanges:",e),Promise.reject(e))))}updateProfilePicture({avatar:e}){return console.log("Updating profile picture with URL:",e),fetch(`${this._standardUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then((e=>(console.log("Received response:",e),e.ok?e.json():Promise.reject(`Error: ${e.status}`)))).catch((e=>(console.error("Error in updateProfilePicture:",e),Promise.reject(e))))}addCard(e){return fetch(`${this._standardUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:e.name,link:e.link})}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`))).catch((e=>(console.error("Error in addCard:",e),Promise.reject(e))))}deleteCard(e){return fetch(`${this._standardUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`))).catch((e=>(console.error("Error in deleteCard:",e),Promise.reject(e))))}addLike(e){return fetch(`${this._standardUrl}/cards/likes/${e}`,{method:"PUT",headers:this._headers}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`))).catch((e=>(console.error("Error in addLike:",e),Promise.reject(e))))}removeLike(e){return fetch(`${this._standardUrl}/cards/likes/${e}`,{method:"DELETE",headers:this._headers}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`))).catch((e=>(console.error("Error in removeLike:",e),Promise.reject(e))))}}class g{constructor({data:e,renderer:t},r){this._renderList=e,this._renderMethod=t,this._renderContainer=r}_clearContainer(){this._renderContainer.innerHTML=""}renderItem(){this._clearContainer(),this._renderList.forEach((e=>{this._renderMethod(e)}))}setItem(e){this._renderContainer.prepend(e)}}const E=new f({nameSelector:".user__name",aboutSelector:".user__role",pictureSelector:".user__image-main"}),C=new S({url:"https://around.nomoreparties.co/v1/web-ptbr-cohort-11",headers:{authorization:"ef61af7f-62bd-42c6-ac64-de2d2731292b","Content-type":"application/json"}}),b=new g({data:[],renderer:e=>{const t=new r(e,"#card-template",handleCardClick).generateCard();b.setItem(t)}},_);function L(e,t){const r=t.querySelector(".photo__like"),o=t.querySelector(".photo__like-count");r.classList.contains("photo__like_active")?C.removeLike(e).then((e=>{r.classList.remove("photo__like_active"),o.textContent=e.likes.length})).catch((e=>{console.error(e)})):C.addLike(e).then((e=>{r.classList.add("photo__like_active"),o.textContent=e.likes.length})).catch((e=>{console.error(e)}))}function k(e){document.querySelectorAll(e).forEach((e=>e.querySelector(".photo__card-image").addEventListener("click",(t=>{t.stopPropagation();const r=e.querySelector(".photo__card-image").src,o=e.querySelector(".photo__text").textContent,s=new v(".popup");s.open(r,o),s.setEventListeners(".photo__card")}))))}function q(e,t){const r=document.querySelector(e);r?r.textContent=t:console.error(`Element with selector ${e} not found`)}const P=new S({url:"https://around.nomoreparties.co/v1/web-ptbr-cohort-11",headers:{authorization:"ef61af7f-62bd-42c6-ac64-de2d2731292b","Content-type":"application/json"}}),I=new f({nameSelector:".user__name",aboutSelector:".user__role",pictureSelector:".user__image-main"}),U=new class extends m{constructor(e,t){super(e),this._handleSubmit=t}open(e){super.open(),this._target=e,this._popup.classList.add("form_opened")}close(){super.close(),this._popup.classList.remove("form_opened")}setEventListeners(){super.setEventListeners(),this._popup.addEventListener("submit",(e=>{e.preventDefault(),this._handleSubmit(this._target),this.close()}))}}("#SubmitCheck",(e=>{C.deleteCard(e._cardID).then((()=>{e._card.remove()})).catch((e=>{console.log(e)})),U.close()}));let j;U.setEventListeners(),P.getUserData().then((e=>{I.setUserInfo(e),j=e._id,P.getInitialCards().then((e=>{const t=new g({data:e,renderer:e=>{const o=new r(e,"#card-template",(e=>U.open(e)),j,L).generateCard();t.setItem(o)}},_);t.renderItem(),k(".photo__card")})).catch((e=>{console.error("Failed to load initial cards:",e)}))})).catch((e=>{console.error("Failed to fetch user data:",e)}));const w=new t({inputSelector:".form__input",submitButtonSelector:".form__button",inactiveButtonClass:"form__button-disabled",inputErrorClass:"form__input-invalid",errorClass:"form__input-error"},c);w.enableValidation();const x=new t({inputSelector:".form__input",submitButtonSelector:".form__button",inactiveButtonClass:"form__button-disabled",inputErrorClass:"form__input-invalid",errorClass:"form__input-error"},l);x.enableValidation();const B=new y("#FormProfile",(function(e){return q("#UserUploadButton","Salvando..."),""!==e.name&&""!==e.about?(this.close(),C.saveProfileChanges(e).then((e=>{console.log("Profile changes saved successfully:",e),E.setUserInfo(e),document.querySelector("#FormProfile").classList.remove("form_opened")})).catch((e=>{console.error("Failed to save profile changes:",e)})).finally((()=>q("#UserUploadButton","Salvar")))):Promise.reject("Invalid input values")}),w);B.setEventListeners();const $=new y("#FormUpload",(function(e,t){if(q("#CardUploadButton","Criando..."),""!==e.url&&""!==e.title){const o={name:e.title,link:e.url};C.addCard(o).then((e=>{e.owner={_id:t};const o=new r(e,"#card-template",(e=>U.open(e)),t,L).generateCard();document.querySelector(".photo").prepend(o),k(".photo__card"),this.close()})).catch((e=>{console.error("Failed to add new card:",e)})).finally((()=>q("#CardUploadButton","Criar")))}else console.error("Title and URL cannot be empty")}),x);$.setEventListeners(),d.addEventListener("click",(()=>{B.open();const e=I.getUserInfo();a.value=e.name,i.value=e.about})),u.addEventListener("click",(()=>{$.open()}));const T=new t({inputSelector:".form__input",submitButtonSelector:".form__button",inactiveButtonClass:"form__button-disabled",inputErrorClass:"form__input-invalid",errorClass:"form__input-error"},document.querySelector("#FormProfilePicture"));T.enableValidation();const A=new y("#FormProfilePicture",(e=>{q("#PictureUploadButton","Salvando...");const t=e.profileUrl;P.updateProfilePicture({avatar:t}).then((e=>{I.setUserInfo({...e,avatar:e.avatar}),A.close()})).catch((e=>{console.error("Failed to update profile picture:",e)})).finally((()=>q("#PictureUploadButton","Salvar")))}),T);A.setEventListeners(),o.addEventListener("click",(()=>{A.open()})),o.addEventListener("mouseover",(()=>{o.querySelector(".user__image-main").style.opacity="25%",s.style.display="block"})),o.addEventListener("mouseout",(()=>{o.querySelector(".user__image-main").style.opacity="100%",s.style.display="none"}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Qix3QkFDckJQLGdCQUFpQixzQkFDakJFLFdBQVkscUJBRWQrQyxTQUFTN0MsY0FBYyx3QkFFekJpTSxFQUFvQjdMLG1CQUVwQixNQUFNOEwsRUFBYyxJQUFJL0YsRUFDdEIsdUJBNUI4Qk8sSUFDOUJ1RSxFQUFXLHVCQUF3QixlQUNuQyxNQUFNa0IsRUFBWXpGLEVBQVkwRixXQUM5QmhCLEVBQ0duQyxxQkFBcUIsQ0FBRTFCLE9BQVE0RSxJQUMvQm5FLE1BQU1ZLElBQ0x5QyxFQUFXN0QsWUFBWSxJQUFLb0IsRUFBVXJCLE9BQVFxQixFQUFTckIsU0FDdkQyRSxFQUFZNUcsT0FBTyxJQUVwQmlELE9BQU9DLElBQ04zRSxRQUFRNEUsTUFBTSxvQ0FBcUNELEVBQUksSUFFeERvRCxTQUFRLElBQU1YLEVBQVcsdUJBQXdCLFdBQVUsR0FrQjlEZ0IsR0FFRkMsRUFBWXpHLG9CQUVadEIsRUFBVTNELGlCQUFpQixTQUFTLEtBQ2xDMEwsRUFBWTdHLE1BQU0sSURuQ2xCbEIsRUFBVTNELGlCQUFpQixhQUFhLEtBQ3RDMkQsRUFBVW5FLGNBQWMscUJBQXFCb0QsTUFBTWlKLFFBQVUsTUFDN0RqSSxFQUFjaEIsTUFBTUMsUUFBVSxPQUFPLElBRXZDYyxFQUFVM0QsaUJBQWlCLFlBQVksS0FDckMyRCxFQUFVbkUsY0FBYyxxQkFBcUJvRCxNQUFNaUosUUFBVSxPQUM3RGpJLEVBQWNoQixNQUFNQyxRQUFVLE1BQU0sRyIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9jb21wb25lbnRzL1ZhbGlkYXRlLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9BUEkuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvdXRpbHMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBkZWZpbml0aW9uKSB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iaiwgcHJvcCkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCk7IH0iLCJleHBvcnQgY2xhc3MgVmFsaWRhdGUge1xuICBjb25zdHJ1Y3RvcihzZWxlY3RvcnMsIGZvcm1TZWxlY3Rvcikge1xuICAgIHRoaXMuX2lucHV0cyA9IEFycmF5LmZyb20oXG4gICAgICBmb3JtU2VsZWN0b3IucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcnMuaW5wdXRTZWxlY3RvcilcbiAgICApO1xuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHNlbGVjdG9ycy5pbnB1dEVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IHNlbGVjdG9ycy5lcnJvckNsYXNzO1xuICAgIHRoaXMuX2J1dHRvbiA9IGZvcm1TZWxlY3Rvci5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHNlbGVjdG9ycy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xuICB9XG5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl90b2dnbGVCdXR0b24odGhpcy5faW5wdXRzKTtcbiAgICB0aGlzLl9pbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX3ZhbGlkYXRlSW5wdXRzKGlucHV0KTtcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uKHRoaXMuX2lucHV0cyk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIF90b2dnbGVCdXR0b24oaW5wdXRMaXN0KSB7XG4gICAgaWYgKHRoaXMuX2NoZWNrSW52YWxpZChpbnB1dExpc3QpKSB7XG4gICAgICB0aGlzLl9idXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgdGhpcy5fYnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2J1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5fYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgfVxuICB9XG5cbiAgX2NoZWNrSW52YWxpZChpbnB1dExpc3QpIHtcbiAgICByZXR1cm4gaW5wdXRMaXN0LnNvbWUoKGlucHV0KSA9PiAhaW5wdXQudmFsaWRpdHkudmFsaWQpO1xuICB9XG5cbiAgX3ZhbGlkYXRlSW5wdXRzKGlucHV0KSB7XG4gICAgY29uc3Qgc3BhbkVycm9yID0gaW5wdXQubmV4dEVsZW1lbnRTaWJsaW5nO1xuICAgIGlmICghaW5wdXQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIGlucHV0LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICAgIHNwYW5FcnJvci5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICAgICAgc3BhbkVycm9yLnRleHRDb250ZW50ID0gaW5wdXQudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlucHV0LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICAgIHNwYW5FcnJvci5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICAgICAgc3BhbkVycm9yLnRleHRDb250ZW50ID0gXCJcIjtcbiAgICB9XG4gIH1cblxuICByZXNldFZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5faW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBpbnB1dC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgICBjb25zdCBzcGFuRXJyb3IgPSBpbnB1dC5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgICBzcGFuRXJyb3IuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcbiAgICAgIHNwYW5FcnJvci50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgfSk7XG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uKHRoaXMuX2lucHV0cyk7XG4gIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoY2FyZHMsIHNlbGVjdG9yLCBoYW5kbGVDb25maXJtLCBjdXJyZW50VXNlcklkLCBoYW5kbGVMaWtlcykge1xuICAgIHRoaXMuX25hbWUgPSBjYXJkcy5uYW1lO1xuICAgIHRoaXMuX2xpbmsgPSBjYXJkcy5saW5rO1xuICAgIHRoaXMuX2NhcmRJRCA9IGNhcmRzLl9pZDtcbiAgICB0aGlzLl9vd25lcklEID0gY2FyZHMub3duZXIuX2lkO1xuICAgIHRoaXMuX2xpa2VzID0gY2FyZHMubGlrZXM7XG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gc2VsZWN0b3I7XG4gICAgdGhpcy5faGFuZGxlQ29uZmlybSA9IGhhbmRsZUNvbmZpcm07XG4gICAgdGhpcy5fY3VycmVudFVzZXJJZCA9IGN1cnJlbnRVc2VySWQ7XG4gICAgdGhpcy5faGFuZGxlTGlrZXMgPSBoYW5kbGVMaWtlcztcbiAgfVxuXG4gIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICBjb25zdCBjYXJkVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcikuY29udGVudDtcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmRUZW1wbGF0ZVxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIucGhvdG9fX2NhcmRcIilcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgcmV0dXJuIGNhcmRFbGVtZW50O1xuICB9XG5cbiAgX3NldExpc3RlbmVycygpIHtcbiAgICBjb25zdCBsaWtlQnV0dG9uID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFwiLnBob3RvX19saWtlXCIpO1xuICAgIGNvbnN0IGRlbGV0ZUJ1dHRvbiA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5waG90b19fZGVsZXRlXCIpO1xuICAgIGlmICh0aGlzLl9vd25lcklEID09PSB0aGlzLl9jdXJyZW50VXNlcklkKSB7XG4gICAgICBkZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5faGFuZGxlQ29uZmlybSh0aGlzKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBkZWxldGVCdXR0b24uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiOyAvLyBFc2NvbmRlIG8gYm90YW8gZGUgZGVsZXRhciBjYXNvIHVzdWFyaW8gbmFvIGZvciBvIGRvbm9cbiAgICB9XG5cbiAgICBsaWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PlxuICAgICAgdGhpcy5faGFuZGxlTGlrZXModGhpcy5fY2FyZElELCB0aGlzLl9jYXJkKVxuICAgICk7XG4gIH1cblxuICB1cGRhdGVMaWtlcyhkYXRhKSB7XG4gICAgY29uc3QgbGlrZUJ1dHRvbiA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5waG90b19fbGlrZVwiKTtcbiAgICBjb25zdCBsaWtlQ291bnQgPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIucGhvdG9fX2xpa2UtY291bnRcIik7XG5cbiAgICBsaWtlQ291bnQudGV4dENvbnRlbnQgPSBkYXRhLmxpa2VzLmxlbmd0aDtcblxuICAgIGlmIChkYXRhLmxpa2VzLnNvbWUoKGxpa2UpID0+IGxpa2UuX2lkID09PSB0aGlzLl9jdXJyZW50VXNlcklkKSkge1xuICAgICAgbGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwicGhvdG9fX2xpa2VfYWN0aXZlXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBsaWtlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJwaG90b19fbGlrZV9hY3RpdmVcIik7XG4gICAgfVxuICB9XG5cbiAgZ2VuZXJhdGVDYXJkKCkge1xuICAgIHRoaXMuX2NhcmQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuICAgIHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5waG90b19fY2FyZC1pbWFnZVwiKS5zcmMgPSB0aGlzLl9saW5rO1xuICAgIHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5waG90b19fY2FyZC1pbWFnZVwiKS5hbHQgPSB0aGlzLl9uYW1lO1xuICAgIHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5waG90b19fdGV4dFwiKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG4gICAgdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFwiLnBob3RvX19saWtlLWNvdW50XCIpLnRleHRDb250ZW50ID1cbiAgICAgIHRoaXMuX2xpa2VzLmxlbmd0aDtcblxuICAgIGlmICh0aGlzLl9saWtlcy5zb21lKChsaWtlKSA9PiBsaWtlLl9pZCA9PT0gdGhpcy5fY3VycmVudFVzZXJJZCkpIHtcbiAgICAgIHRoaXMuX2NhcmRcbiAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIucGhvdG9fX2xpa2VcIilcbiAgICAgICAgLmNsYXNzTGlzdC5hZGQoXCJwaG90b19fbGlrZV9hY3RpdmVcIik7XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coXCJDYXJkIGdlbmVyYXRlZDpcIiwgdGhpcy5fY2FyZCk7IC8vIERlYnVnIGxvZ1xuICAgIHRoaXMuX3NldExpc3RlbmVycygpO1xuICAgIHJldHVybiB0aGlzLl9jYXJkO1xuICB9XG5cbiAgaGFuZGxlTm9QaWNzKCkge1xuICAgIGNvbnN0IHBpY3R1cmVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5waG90b19fY2FyZFwiKTtcbiAgICBjb25zdCBlbXB0eU1lc3NhZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBob3RvX19lbXB0eVwiKTtcbiAgICBpZiAocGljdHVyZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICBkb2N1bWVudFxuICAgICAgICAucXVlcnlTZWxlY3RvcihcIi5waG90b1wiKVxuICAgICAgICAuaW5zZXJ0QWRqYWNlbnRIVE1MKFxuICAgICAgICAgIFwiYWZ0ZXJiZWdpblwiLFxuICAgICAgICAgIGA8cCBjbGFzcz1cInBob3RvX19lbXB0eVwiPk5PIFBJQ1RVUkVTPC9wPmBcbiAgICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGVtcHR5TWVzc2FnZSkge1xuICAgICAgICBlbXB0eU1lc3NhZ2UucmVtb3ZlKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iLCJleHBvcnQgY29uc3QgdXNlcm5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnVzZXJfX25hbWVcIik7XG5leHBvcnQgY29uc3QgdXNlcmFib3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi51c2VyX19yb2xlXCIpO1xuZXhwb3J0IGNvbnN0IHVzZXJpbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudXNlcl9faW1hZ2VcIik7XG5leHBvcnQgY29uc3QgdXNlcmltYWdlRWRpdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudXNlcl9faW1hZ2UtZWRpdFwiKTtcbmV4cG9ydCBjb25zdCBwYWdlT3BhY2l0eSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGFnZV9fb3BhY2l0eVwiKTtcbmV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gIHtcbiAgICBuYW1lOiBcIlZhbGUgZGUgWW9zZW1pdGVcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vd2ViLWNvZGUvbW92ZWRfeW9zZW1pdGUuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhZ28gTG91aXNlXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3dlYi1jb2RlL21vdmVkX2xha2UtbG91aXNlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJNb250YW5oYXMgQ2FyZWNhc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS93ZWItY29kZS9tb3ZlZF9iYWxkLW1vdW50YWlucy5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS93ZWItY29kZS9tb3ZlZF9sYXRlbWFyLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJQYXJxdWUgTmFjaW9uYWwgZGEgVmFub2lzZSBcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vd2ViLWNvZGUvbW92ZWRfdmFub2lzZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vd2ViLWNvZGUvbW92ZWRfbGFnby5qcGdcIixcbiAgfSxcbl07XG5leHBvcnQgY29uc3QgcGljdHVyZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBob3RvX19jYXJkXCIpO1xuZXhwb3J0IGNvbnN0IGVtcHR5TWVzc2FnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGhvdG9fX2VtcHR5XCIpO1xuZXhwb3J0IGNvbnN0IHRpdGxlSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI1RpdGxlSW5wdXRcIik7XG5leHBvcnQgY29uc3QgbGlua0lucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNMaW5rSW5wdXRcIik7XG5leHBvcnQgY29uc3QgYWJvdXRJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjQWJvdXRJbnB1dFwiKTtcbmV4cG9ydCBjb25zdCBuYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI05hbWVJbnB1dFwiKTtcbmV4cG9ydCBjb25zdCBmb3JtUHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjRm9ybVByb2ZpbGVcIik7XG5leHBvcnQgY29uc3QgZm9ybVVwbG9hZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjRm9ybVVwbG9hZFwiKTtcbmV4cG9ydCBjb25zdCBmb3JtRWRpdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudXNlcl9fZWRpdFwiKTtcbmV4cG9ydCBjb25zdCBidXR0b25BZGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnVzZXJfX2FkZFwiKTtcbmV4cG9ydCBjb25zdCBwaG90b0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGhvdG9cIik7XG5leHBvcnQgY29uc3QgZm9ybUNsb3NlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5mb3JtX19idG4tY2xvc2VcIik7XG5leHBvcnQgY29uc3QgaW1hZ2VDbG9zZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Nsb3NlXCIpO1xuZXhwb3J0IGNvbnN0IHBvcHVwSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWFnZVwiKTtcbmV4cG9ydCBjb25zdCBwb3B1cEltYWdlU3VidGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIi5wb3B1cF9faW1hZ2Utc3VidGl0bGVcIlxuKTtcbiIsImltcG9ydCB7IHBhZ2VPcGFjaXR5LCBpbWFnZUNsb3NlLCBmb3JtQ2xvc2UgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5faXNPcGVuID0gZmFsc2U7XG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xuICB9XG4gIG9wZW4oKSB7XG4gICAgcGFnZU9wYWNpdHkuY2xhc3NMaXN0LmFkZChcInBhZ2VfX29wYWNpdHktdG9nZ2xlZFwiKTtcbiAgICBwYWdlT3BhY2l0eS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgICB0aGlzLl9pc09wZW4gPSB0cnVlO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgcGFnZU9wYWNpdHkuY2xhc3NMaXN0LnJlbW92ZShcInBhZ2VfX29wYWNpdHktdG9nZ2xlZFwiKTtcbiAgICBwYWdlT3BhY2l0eS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICAgIHRoaXMuX2lzT3BlbiA9IGZhbHNlO1xuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcbiAgICAgIGlmIChwYWdlT3BhY2l0eS5jb250YWlucyhldnQudGFyZ2V0KSkge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgaW1hZ2VDbG9zZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0pO1xuICAgIGZvcm1DbG9zZS5mb3JFYWNoKChidXR0b24pID0+IHtcbiAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9wb3B1cFN1YnRpdGxlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW1hZ2Utc3VidGl0bGVcIik7XG4gICAgdGhpcy5fcG9wdXBJbWFnZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlXCIpO1xuICB9XG4gIG9wZW4oaW1hZ2VTcmMsIHRpdGxlKSB7XG4gICAgc3VwZXIub3BlbigpO1xuICAgIHRoaXMuX3BvcHVwLnN0eWxlLmRpc3BsYXkgPSBcImlubGluZS1ibG9ja1wiO1xuICAgIHRoaXMuX3BvcHVwSW1hZ2Uuc3JjID0gaW1hZ2VTcmM7XG4gICAgdGhpcy5fcG9wdXBTdWJ0aXRsZS50ZXh0Q29udGVudCA9IHRpdGxlO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgICB0aGlzLl9wb3B1cC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgdGhpcy5fcG9wdXBJbWFnZS5zcmMgPSBcIlwiO1xuICAgIHRoaXMuX3BvcHVwU3VidGl0bGUudGV4dENvbnRlbnQgPSBcIlwiO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgaWYgKHRoaXMuX2lzT3Blbikge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZVN1Ym1pdCwgdmFsaWRhdG9yKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5faGFuZGxlU3VibWl0ID0gaGFuZGxlU3VibWl0LmJpbmQodGhpcyk7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvckFsbChcIi5mb3JtX19pbnB1dFwiKTtcbiAgICB0aGlzLl92YWxpZGF0b3IgPSB2YWxpZGF0b3I7IC8vIEFkZCBhIHJlZmVyZW5jZSB0byB0aGUgdmFsaWRhdG9yXG4gIH1cblxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7fTtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIGlucHV0VmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIGlucHV0VmFsdWVzO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICBjb25zdCBDbG9zZUJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmZvcm1fX2J0bi1jbG9zZVwiKTtcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5faGFuZGxlU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xuICAgIH0pO1xuICAgIENsb3NlQnV0dG9ucy5mb3JFYWNoKChidXR0b24pID0+IHtcbiAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgdGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKTtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwiZm9ybV9vcGVuZWRcIik7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBpbnB1dC52YWx1ZSA9IFwiXCI7XG4gICAgICBjb25zb2xlLmxvZyhcImNsZWFyZWRcIik7XG4gICAgfSk7XG4gIH1cblxuICBvcGVuKCkge1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKFwiZm9ybV9vcGVuZWRcIik7XG4gICAgdGhpcy5fdmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpOyAvLyBSZXNldCB2YWxpZGF0aW9uIHN0YXRlIHdoZW4gdGhlIGZvcm0gaXMgb3BlbmVkXG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aENvbmZpcm1hdGlvbiBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlU3VibWl0KSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5faGFuZGxlU3VibWl0ID0gaGFuZGxlU3VibWl0O1xuICB9XG5cbiAgb3Blbih0YXJnZXQpIHtcbiAgICBzdXBlci5vcGVuKCk7XG4gICAgdGhpcy5fdGFyZ2V0ID0gdGFyZ2V0O1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoXCJmb3JtX29wZW5lZFwiKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZShcImZvcm1fb3BlbmVkXCIpO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5faGFuZGxlU3VibWl0KHRoaXMuX3RhcmdldCk7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IoeyBuYW1lU2VsZWN0b3IsIGFib3V0U2VsZWN0b3IsIHBpY3R1cmVTZWxlY3RvciB9KSB7XG4gICAgdGhpcy5fbmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XG4gICAgdGhpcy5fYWJvdXRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhYm91dFNlbGVjdG9yKTtcbiAgICB0aGlzLl9waWN0dXJlRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocGljdHVyZVNlbGVjdG9yKTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCxcbiAgICAgIGFib3V0OiB0aGlzLl9hYm91dEVsZW1lbnQudGV4dENvbnRlbnQsXG4gICAgICBhdmF0YXI6IHRoaXMuX3BpY3R1cmVFbGVtZW50LnNyYyxcbiAgICB9O1xuICB9XG5cbiAgc2V0VXNlckluZm8oeyBuYW1lLCBhYm91dCwgYXZhdGFyIH0pIHtcbiAgICBjb25zb2xlLmxvZyhcIlNldHRpbmcgdXNlciBpbmZvOlwiLCB7IG5hbWUsIGFib3V0LCBhdmF0YXIgfSk7XG4gICAgdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHRoaXMuX2Fib3V0RWxlbWVudC50ZXh0Q29udGVudCA9IGFib3V0O1xuICAgIGlmIChhdmF0YXIpIHtcbiAgICAgIHRoaXMuX3BpY3R1cmVFbGVtZW50LnNyYyA9IGF2YXRhcjtcbiAgICB9XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFQSSB7XG4gIGNvbnN0cnVjdG9yKGRhdGEpIHtcbiAgICB0aGlzLl9zdGFuZGFyZFVybCA9IGRhdGEudXJsO1xuICAgIHRoaXMuX2hlYWRlcnMgPSBkYXRhLmhlYWRlcnM7XG4gIH1cblxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3N0YW5kYXJkVXJsfS9jYXJkc2AsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiY2FyZHMgbG9hZGVkIHN1Y2Nlc3NmdWxseVwiKTtcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGluIGdldEluaXRpYWxDYXJkczpcIiwgZXJyKTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycik7XG4gICAgICB9KTtcbiAgfVxuXG4gIGdldFVzZXJEYXRhKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9zdGFuZGFyZFVybH0vdXNlcnMvbWVgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpO1xuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgaW4gZ2V0VXNlckRhdGE6XCIsIGVycik7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnIpO1xuICAgICAgfSk7XG4gIH1cblxuICBzYXZlUHJvZmlsZUNoYW5nZXModXNlckRhdGEpIHtcbiAgICBjb25zb2xlLmxvZyhcIlNhdmluZyBwcm9maWxlIGNoYW5nZXM6XCIsIHVzZXJEYXRhKTtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fc3RhbmRhcmRVcmx9L3VzZXJzL21lYCwge1xuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lOiB1c2VyRGF0YS5uYW1lLFxuICAgICAgICBhYm91dDogdXNlckRhdGEuYWJvdXQsXG4gICAgICB9KSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhcIlJlY2VpdmVkIHJlc3BvbnNlOlwiLCByZXMpO1xuICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBpbiBzYXZlUHJvZmlsZUNoYW5nZXM6XCIsIGVycik7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnIpO1xuICAgICAgfSk7XG4gIH1cblxuICB1cGRhdGVQcm9maWxlUGljdHVyZSh7IGF2YXRhciB9KSB7XG4gICAgY29uc29sZS5sb2coXCJVcGRhdGluZyBwcm9maWxlIHBpY3R1cmUgd2l0aCBVUkw6XCIsIGF2YXRhcik7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3N0YW5kYXJkVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IGF2YXRhciB9KSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhcIlJlY2VpdmVkIHJlc3BvbnNlOlwiLCByZXMpO1xuICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBpbiB1cGRhdGVQcm9maWxlUGljdHVyZTpcIiwgZXJyKTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycik7XG4gICAgICB9KTtcbiAgfVxuXG4gIGFkZENhcmQoY2FyZERhdGEpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fc3RhbmRhcmRVcmx9L2NhcmRzYCwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWU6IGNhcmREYXRhLm5hbWUsXG4gICAgICAgIGxpbms6IGNhcmREYXRhLmxpbmssXG4gICAgICB9KSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBpbiBhZGRDYXJkOlwiLCBlcnIpO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgZGVsZXRlQ2FyZChjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fc3RhbmRhcmRVcmx9L2NhcmRzLyR7Y2FyZElkfWAsIHtcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgaW4gZGVsZXRlQ2FyZDpcIiwgZXJyKTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycik7XG4gICAgICB9KTtcbiAgfVxuXG4gIGFkZExpa2UoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3N0YW5kYXJkVXJsfS9jYXJkcy9saWtlcy8ke2NhcmRJZH1gLCB7XG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGluIGFkZExpa2U6XCIsIGVycik7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnIpO1xuICAgICAgfSk7XG4gIH1cblxuICByZW1vdmVMaWtlKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9zdGFuZGFyZFVybH0vY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCwge1xuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBpbiByZW1vdmVMaWtlOlwiLCBlcnIpO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyKTtcbiAgICAgIH0pO1xuICB9XG59XG4iLCJleHBvcnQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgZGF0YSwgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9yZW5kZXJMaXN0ID0gZGF0YTtcbiAgICB0aGlzLl9yZW5kZXJNZXRob2QgPSByZW5kZXJlcjtcbiAgICB0aGlzLl9yZW5kZXJDb250YWluZXIgPSBjb250YWluZXJTZWxlY3RvcjtcbiAgfVxuXG4gIF9jbGVhckNvbnRhaW5lcigpIHtcbiAgICB0aGlzLl9yZW5kZXJDb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcbiAgfVxuXG4gIHJlbmRlckl0ZW0oKSB7XG4gICAgdGhpcy5fY2xlYXJDb250YWluZXIoKTtcbiAgICB0aGlzLl9yZW5kZXJMaXN0LmZvckVhY2goKGkpID0+IHtcbiAgICAgIHRoaXMuX3JlbmRlck1ldGhvZChpKTtcbiAgICB9KTtcbiAgfVxuXG4gIHNldEl0ZW0oaSkge1xuICAgIHRoaXMuX3JlbmRlckNvbnRhaW5lci5wcmVwZW5kKGkpO1xuICB9XG59XG4iLCJpbXBvcnQgeyBDYXJkIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5pbXBvcnQgeyBQb3B1cFdpdGhDb25maXJtYXRpb24sIFBvcHVwV2l0aEltYWdlIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXAuanNcIjtcbmltcG9ydCB7IHBob3RvQ29udGFpbmVyLCB1c2VyaW1hZ2UsIHVzZXJpbWFnZUVkaXQgfSBmcm9tIFwiLi9jb25zdGFudHMuanNcIjtcbmltcG9ydCBBUEkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQVBJLmpzXCI7XG5pbXBvcnQgeyBTZWN0aW9uIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuaW1wb3J0IHsgcG9wdXBDb25maXJtYXRpb24gfSBmcm9tIFwiLi4vcGFnZXMvaW5kZXguanNcIjtcblxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xuICBuYW1lU2VsZWN0b3I6IFwiLnVzZXJfX25hbWVcIixcbiAgYWJvdXRTZWxlY3RvcjogXCIudXNlcl9fcm9sZVwiLFxuICBwaWN0dXJlU2VsZWN0b3I6IFwiLnVzZXJfX2ltYWdlLW1haW5cIixcbn0pO1xuY29uc3QgVXRpbEFQSSA9IG5ldyBBUEkoe1xuICB1cmw6IFwiaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS93ZWItcHRici1jb2hvcnQtMTFcIixcbiAgaGVhZGVyczoge1xuICAgIGF1dGhvcml6YXRpb246IFwiZWY2MWFmN2YtNjJiZC00MmM2LWFjNjQtZGUyZDI3MzEyOTJiXCIsXG4gICAgXCJDb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gIH0sXG59KTtcblxuZXhwb3J0IGZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KGlucHV0VmFsdWVzKSB7XG4gIHJlbmRlckxvYWQoXCIjVXNlclVwbG9hZEJ1dHRvblwiLCBcIlNhbHZhbmRvLi4uXCIpO1xuICBpZiAoaW5wdXRWYWx1ZXMubmFtZSAhPT0gXCJcIiAmJiBpbnB1dFZhbHVlcy5hYm91dCAhPT0gXCJcIikge1xuICAgIHRoaXMuY2xvc2UoKTtcbiAgICByZXR1cm4gVXRpbEFQSS5zYXZlUHJvZmlsZUNoYW5nZXMoaW5wdXRWYWx1ZXMpXG4gICAgICAudGhlbigodXNlckRhdGEpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coXCJQcm9maWxlIGNoYW5nZXMgc2F2ZWQgc3VjY2Vzc2Z1bGx5OlwiLCB1c2VyRGF0YSk7XG4gICAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHVzZXJEYXRhKTtcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNGb3JtUHJvZmlsZVwiKS5jbGFzc0xpc3QucmVtb3ZlKFwiZm9ybV9vcGVuZWRcIik7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBzYXZlIHByb2ZpbGUgY2hhbmdlczpcIiwgZXJyKTtcbiAgICAgIH0pXG4gICAgICAuZmluYWxseSgoKSA9PiByZW5kZXJMb2FkKFwiI1VzZXJVcGxvYWRCdXR0b25cIiwgXCJTYWx2YXJcIikpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChcIkludmFsaWQgaW5wdXQgdmFsdWVzXCIpO1xuICB9XG59XG5cbmNvbnN0IFByb2ZpbGVDYXJkcyA9IG5ldyBTZWN0aW9uKFxuICB7XG4gICAgZGF0YTogW10sXG4gICAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XG4gICAgICBjb25zdCBjYXJkID0gbmV3IENhcmQoaXRlbSwgXCIjY2FyZC10ZW1wbGF0ZVwiLCBoYW5kbGVDYXJkQ2xpY2spO1xuICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xuICAgICAgUHJvZmlsZUNhcmRzLnNldEl0ZW0oY2FyZEVsZW1lbnQpO1xuICAgIH0sXG4gIH0sXG4gIHBob3RvQ29udGFpbmVyXG4pO1xuXG5leHBvcnQgZnVuY3Rpb24gaGFuZGxlVXBsb2FkRm9ybVN1Ym1pdChpbnB1dFZhbHVlcywgY3VycmVudFVzZXJJZCkge1xuICByZW5kZXJMb2FkKFwiI0NhcmRVcGxvYWRCdXR0b25cIiwgXCJDcmlhbmRvLi4uXCIpO1xuICBpZiAoaW5wdXRWYWx1ZXMudXJsICE9PSBcIlwiICYmIGlucHV0VmFsdWVzLnRpdGxlICE9PSBcIlwiKSB7XG4gICAgY29uc3QgbmV3Q2FyZCA9IHtcbiAgICAgIG5hbWU6IGlucHV0VmFsdWVzLnRpdGxlLFxuICAgICAgbGluazogaW5wdXRWYWx1ZXMudXJsLFxuICAgIH07XG5cbiAgICBVdGlsQVBJLmFkZENhcmQobmV3Q2FyZClcbiAgICAgIC50aGVuKChhZGRlZENhcmQpID0+IHtcbiAgICAgICAgYWRkZWRDYXJkLm93bmVyID0geyBfaWQ6IGN1cnJlbnRVc2VySWQgfTsgLy8gRGVmaW5lIElEIGRvIG93bmVyIHBybyBJRCBkbyB1c3VhcmlvIGF0dWFsXG4gICAgICAgIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcbiAgICAgICAgICBhZGRlZENhcmQsXG4gICAgICAgICAgXCIjY2FyZC10ZW1wbGF0ZVwiLFxuICAgICAgICAgIChjYXJkSW5zdGFuY2UpID0+IHBvcHVwQ29uZmlybWF0aW9uLm9wZW4oY2FyZEluc3RhbmNlKSxcbiAgICAgICAgICBjdXJyZW50VXNlcklkLFxuICAgICAgICAgIGhhbmRsZUxpa2VzXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5waG90b1wiKS5wcmVwZW5kKGNhcmRFbGVtZW50KTtcbiAgICAgICAgc2V0dXBQb3B1cHMoXCIucGhvdG9fX2NhcmRcIik7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGFkZCBuZXcgY2FyZDpcIiwgZXJyKTtcbiAgICAgIH0pXG4gICAgICAuZmluYWxseSgoKSA9PiByZW5kZXJMb2FkKFwiI0NhcmRVcGxvYWRCdXR0b25cIiwgXCJDcmlhclwiKSk7XG4gIH0gZWxzZSB7XG4gICAgY29uc29sZS5lcnJvcihcIlRpdGxlIGFuZCBVUkwgY2Fubm90IGJlIGVtcHR5XCIpO1xuICB9XG59XG5cbmV4cG9ydCBjb25zdCBoYW5kbGVDb25maXJtYXRpb25TdWJtaXQgPSAodGFyZ2V0KSA9PiB7XG4gIFV0aWxBUEkuZGVsZXRlQ2FyZCh0YXJnZXQuX2NhcmRJRClcbiAgICAudGhlbigoKSA9PiB7XG4gICAgICB0YXJnZXQuX2NhcmQucmVtb3ZlKCk7IC8vIFJlbW92ZSBhIGNhcnRhIGRvIERvbVxuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgfSk7XG4gIHBvcHVwQ29uZmlybWF0aW9uLmNsb3NlKCk7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gaGFuZGxlTGlrZXMoY2FyZElkLCBjYXJkRWxlbWVudCkge1xuICBjb25zdCBsaWtlQnV0dG9uID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5waG90b19fbGlrZVwiKTtcbiAgY29uc3QgbGlrZUNvdW50ID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5waG90b19fbGlrZS1jb3VudFwiKTtcblxuICBpZiAobGlrZUJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoXCJwaG90b19fbGlrZV9hY3RpdmVcIikpIHtcbiAgICBVdGlsQVBJLnJlbW92ZUxpa2UoY2FyZElkKVxuICAgICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgbGlrZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwicGhvdG9fX2xpa2VfYWN0aXZlXCIpO1xuICAgICAgICBsaWtlQ291bnQudGV4dENvbnRlbnQgPSBkYXRhLmxpa2VzLmxlbmd0aDtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBVdGlsQVBJLmFkZExpa2UoY2FyZElkKVxuICAgICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgbGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwicGhvdG9fX2xpa2VfYWN0aXZlXCIpO1xuICAgICAgICBsaWtlQ291bnQudGV4dENvbnRlbnQgPSBkYXRhLmxpa2VzLmxlbmd0aDtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0dXBQb3B1cHMoY2FyZCkge1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGNhcmQpLmZvckVhY2goKGkpID0+XG4gICAgaS5xdWVyeVNlbGVjdG9yKFwiLnBob3RvX19jYXJkLWltYWdlXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XG4gICAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICBjb25zdCBJbWdTcmMgPSBpLnF1ZXJ5U2VsZWN0b3IoXCIucGhvdG9fX2NhcmQtaW1hZ2VcIikuc3JjO1xuICAgICAgY29uc3QgdGl0bGUgPSBpLnF1ZXJ5U2VsZWN0b3IoXCIucGhvdG9fX3RleHRcIikudGV4dENvbnRlbnQ7XG4gICAgICBjb25zdCBwb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIi5wb3B1cFwiKTtcbiAgICAgIHBvcHVwLm9wZW4oSW1nU3JjLCB0aXRsZSk7XG4gICAgICBwb3B1cC5zZXRFdmVudExpc3RlbmVycyhcIi5waG90b19fY2FyZFwiKTtcbiAgICB9KVxuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0dXBQcm9maWxlRWRpdCgpIHtcbiAgdXNlcmltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW92ZXJcIiwgKCkgPT4ge1xuICAgIHVzZXJpbWFnZS5xdWVyeVNlbGVjdG9yKFwiLnVzZXJfX2ltYWdlLW1haW5cIikuc3R5bGUub3BhY2l0eSA9IFwiMjUlXCI7XG4gICAgdXNlcmltYWdlRWRpdC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICB9KTtcbiAgdXNlcmltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW91dFwiLCAoKSA9PiB7XG4gICAgdXNlcmltYWdlLnF1ZXJ5U2VsZWN0b3IoXCIudXNlcl9faW1hZ2UtbWFpblwiKS5zdHlsZS5vcGFjaXR5ID0gXCIxMDAlXCI7XG4gICAgdXNlcmltYWdlRWRpdC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyTG9hZChzZWxlY3RvciwgdGV4dCkge1xuICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG4gIGlmICghZWxlbWVudCkge1xuICAgIGNvbnNvbGUuZXJyb3IoYEVsZW1lbnQgd2l0aCBzZWxlY3RvciAke3NlbGVjdG9yfSBub3QgZm91bmRgKTtcbiAgICByZXR1cm47XG4gIH1cbiAgZWxlbWVudC50ZXh0Q29udGVudCA9IHRleHQ7XG59XG4iLCJpbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xuaW1wb3J0IHsgVmFsaWRhdGUgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9WYWxpZGF0ZS5qc1wiO1xuaW1wb3J0IHsgQ2FyZCB9IGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCB7IFBvcHVwV2l0aENvbmZpcm1hdGlvbiwgUG9wdXBXaXRoRm9ybSB9IGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwLmpzXCI7XG5pbXBvcnQge1xuICBoYW5kbGVVcGxvYWRGb3JtU3VibWl0LFxuICBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdCxcbiAgc2V0dXBQb3B1cHMsXG4gIHNldHVwUHJvZmlsZUVkaXQsXG4gIHJlbmRlckxvYWQsXG4gIGhhbmRsZUNvbmZpcm1hdGlvblN1Ym1pdCxcbiAgaGFuZGxlTGlrZXMsXG59IGZyb20gXCIuLi91dGlscy91dGlscy5qc1wiO1xuaW1wb3J0IHtcbiAgZm9ybVByb2ZpbGUsXG4gIGZvcm1VcGxvYWQsXG4gIGZvcm1FZGl0LFxuICBidXR0b25BZGQsXG4gIHBob3RvQ29udGFpbmVyLFxuICB1c2VyaW1hZ2UsXG4gIG5hbWVJbnB1dCxcbiAgYWJvdXRJbnB1dCxcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuaW1wb3J0IHsgU2VjdGlvbiB9IGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IEFQSSBmcm9tIFwiLi4vY29tcG9uZW50cy9BUEkuanNcIjtcblxuY29uc3QgYXBpID0gbmV3IEFQSSh7XG4gIHVybDogXCJodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL3dlYi1wdGJyLWNvaG9ydC0xMVwiLFxuICBoZWFkZXJzOiB7XG4gICAgYXV0aG9yaXphdGlvbjogXCJlZjYxYWY3Zi02MmJkLTQyYzYtYWM2NC1kZTJkMjczMTI5MmJcIixcbiAgICBcIkNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgfSxcbn0pO1xuXG5jb25zdCBVc2VyVmFsdWVzID0gbmV3IFVzZXJJbmZvKHtcbiAgbmFtZVNlbGVjdG9yOiBcIi51c2VyX19uYW1lXCIsXG4gIGFib3V0U2VsZWN0b3I6IFwiLnVzZXJfX3JvbGVcIixcbiAgcGljdHVyZVNlbGVjdG9yOiBcIi51c2VyX19pbWFnZS1tYWluXCIsXG59KTtcblxuZXhwb3J0IGNvbnN0IHBvcHVwQ29uZmlybWF0aW9uID0gbmV3IFBvcHVwV2l0aENvbmZpcm1hdGlvbihcbiAgXCIjU3VibWl0Q2hlY2tcIixcbiAgaGFuZGxlQ29uZmlybWF0aW9uU3VibWl0XG4pO1xucG9wdXBDb25maXJtYXRpb24uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxubGV0IGN1cnJlbnRVc2VySWQ7XG5cbmFwaVxuICAuZ2V0VXNlckRhdGEoKVxuICAudGhlbigodXNlckRhdGEpID0+IHtcbiAgICBVc2VyVmFsdWVzLnNldFVzZXJJbmZvKHVzZXJEYXRhKTtcbiAgICBjdXJyZW50VXNlcklkID0gdXNlckRhdGEuX2lkO1xuXG4gICAgYXBpXG4gICAgICAuZ2V0SW5pdGlhbENhcmRzKClcbiAgICAgIC50aGVuKChjYXJkcykgPT4ge1xuICAgICAgICBjb25zdCBQcm9maWxlQ2FyZHMgPSBuZXcgU2VjdGlvbihcbiAgICAgICAgICB7XG4gICAgICAgICAgICBkYXRhOiBjYXJkcyxcbiAgICAgICAgICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBjYXJkID0gbmV3IENhcmQoXG4gICAgICAgICAgICAgICAgaXRlbSxcbiAgICAgICAgICAgICAgICBcIiNjYXJkLXRlbXBsYXRlXCIsXG4gICAgICAgICAgICAgICAgKGNhcmRJbnN0YW5jZSkgPT4gcG9wdXBDb25maXJtYXRpb24ub3BlbihjYXJkSW5zdGFuY2UpLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRVc2VySWQsXG4gICAgICAgICAgICAgICAgaGFuZGxlTGlrZXNcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xuICAgICAgICAgICAgICBQcm9maWxlQ2FyZHMuc2V0SXRlbShjYXJkRWxlbWVudCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAgcGhvdG9Db250YWluZXJcbiAgICAgICAgKTtcbiAgICAgICAgUHJvZmlsZUNhcmRzLnJlbmRlckl0ZW0oKTtcbiAgICAgICAgc2V0dXBQb3B1cHMoXCIucGhvdG9fX2NhcmRcIik7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBsb2FkIGluaXRpYWwgY2FyZHM6XCIsIGVycik7XG4gICAgICB9KTtcbiAgfSlcbiAgLmNhdGNoKChlcnIpID0+IHtcbiAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGZldGNoIHVzZXIgZGF0YTpcIiwgZXJyKTtcbiAgfSk7XG5cbmNvbnN0IGZvcm1Qcm9maWxlVmFsaWRhdG9yID0gbmV3IFZhbGlkYXRlKFxuICB7XG4gICAgaW5wdXRTZWxlY3RvcjogXCIuZm9ybV9faW5wdXRcIixcbiAgICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIuZm9ybV9fYnV0dG9uXCIsXG4gICAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJmb3JtX19idXR0b24tZGlzYWJsZWRcIixcbiAgICBpbnB1dEVycm9yQ2xhc3M6IFwiZm9ybV9faW5wdXQtaW52YWxpZFwiLFxuICAgIGVycm9yQ2xhc3M6IFwiZm9ybV9faW5wdXQtZXJyb3JcIixcbiAgfSxcbiAgZm9ybVByb2ZpbGVcbik7XG5mb3JtUHJvZmlsZVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbmNvbnN0IGZvcm1VcGxvYWRWYWxpZGF0b3IgPSBuZXcgVmFsaWRhdGUoXG4gIHtcbiAgICBpbnB1dFNlbGVjdG9yOiBcIi5mb3JtX19pbnB1dFwiLFxuICAgIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5mb3JtX19idXR0b25cIixcbiAgICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcImZvcm1fX2J1dHRvbi1kaXNhYmxlZFwiLFxuICAgIGlucHV0RXJyb3JDbGFzczogXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIsXG4gICAgZXJyb3JDbGFzczogXCJmb3JtX19pbnB1dC1lcnJvclwiLFxuICB9LFxuICBmb3JtVXBsb2FkXG4pO1xuZm9ybVVwbG9hZFZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbmNvbnN0IHBvcHVwUHJvZmlsZSA9IG5ldyBQb3B1cFdpdGhGb3JtKFxuICBcIiNGb3JtUHJvZmlsZVwiLFxuICBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdCxcbiAgZm9ybVByb2ZpbGVWYWxpZGF0b3Jcbik7XG5wb3B1cFByb2ZpbGUuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgcG9wdXBVcGxvYWQgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgXCIjRm9ybVVwbG9hZFwiLFxuICBoYW5kbGVVcGxvYWRGb3JtU3VibWl0LFxuICBmb3JtVXBsb2FkVmFsaWRhdG9yXG4pO1xucG9wdXBVcGxvYWQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuZm9ybUVkaXQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgcG9wdXBQcm9maWxlLm9wZW4oKTtcbiAgY29uc3QgY3VycmVudFZhbHVlcyA9IFVzZXJWYWx1ZXMuZ2V0VXNlckluZm8oKTtcbiAgbmFtZUlucHV0LnZhbHVlID0gY3VycmVudFZhbHVlcy5uYW1lO1xuICBhYm91dElucHV0LnZhbHVlID0gY3VycmVudFZhbHVlcy5hYm91dDtcbn0pO1xuYnV0dG9uQWRkLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIHBvcHVwVXBsb2FkLm9wZW4oKTtcbn0pO1xuXG5jb25zdCBoYW5kbGVBdmF0YXJGb3JtU3VibWl0ID0gKGlucHV0VmFsdWVzKSA9PiB7XG4gIHJlbmRlckxvYWQoXCIjUGljdHVyZVVwbG9hZEJ1dHRvblwiLCBcIlNhbHZhbmRvLi4uXCIpO1xuICBjb25zdCBhdmF0YXJVcmwgPSBpbnB1dFZhbHVlcy5wcm9maWxlVXJsO1xuICBhcGlcbiAgICAudXBkYXRlUHJvZmlsZVBpY3R1cmUoeyBhdmF0YXI6IGF2YXRhclVybCB9KVxuICAgIC50aGVuKCh1c2VyRGF0YSkgPT4ge1xuICAgICAgVXNlclZhbHVlcy5zZXRVc2VySW5mbyh7IC4uLnVzZXJEYXRhLCBhdmF0YXI6IHVzZXJEYXRhLmF2YXRhciB9KTtcbiAgICAgIHBvcHVwQXZhdGFyLmNsb3NlKCk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byB1cGRhdGUgcHJvZmlsZSBwaWN0dXJlOlwiLCBlcnIpO1xuICAgIH0pXG4gICAgLmZpbmFsbHkoKCkgPT4gcmVuZGVyTG9hZChcIiNQaWN0dXJlVXBsb2FkQnV0dG9uXCIsIFwiU2FsdmFyXCIpKTtcbn07XG5cbmNvbnN0IGZvcm1BdmF0YXJWYWxpZGF0b3IgPSBuZXcgVmFsaWRhdGUoXG4gIHtcbiAgICBpbnB1dFNlbGVjdG9yOiBcIi5mb3JtX19pbnB1dFwiLFxuICAgIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5mb3JtX19idXR0b25cIixcbiAgICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcImZvcm1fX2J1dHRvbi1kaXNhYmxlZFwiLFxuICAgIGlucHV0RXJyb3JDbGFzczogXCJmb3JtX19pbnB1dC1pbnZhbGlkXCIsXG4gICAgZXJyb3JDbGFzczogXCJmb3JtX19pbnB1dC1lcnJvclwiLFxuICB9LFxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI0Zvcm1Qcm9maWxlUGljdHVyZVwiKVxuKTtcbmZvcm1BdmF0YXJWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5jb25zdCBwb3B1cEF2YXRhciA9IG5ldyBQb3B1cFdpdGhGb3JtKFxuICBcIiNGb3JtUHJvZmlsZVBpY3R1cmVcIixcbiAgaGFuZGxlQXZhdGFyRm9ybVN1Ym1pdCxcbiAgZm9ybUF2YXRhclZhbGlkYXRvclxuKTtcbnBvcHVwQXZhdGFyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbnVzZXJpbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBwb3B1cEF2YXRhci5vcGVuKCk7XG59KTtcblxuc2V0dXBQcm9maWxlRWRpdChwb3B1cEF2YXRhcik7XG4iXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsImV4cG9ydHMiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJWYWxpZGF0ZSIsImNvbnN0cnVjdG9yIiwic2VsZWN0b3JzIiwiZm9ybVNlbGVjdG9yIiwidGhpcyIsIl9pbnB1dHMiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfYnV0dG9uIiwicXVlcnlTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiZW5hYmxlVmFsaWRhdGlvbiIsIl90b2dnbGVCdXR0b24iLCJmb3JFYWNoIiwiaW5wdXQiLCJhZGRFdmVudExpc3RlbmVyIiwiX3ZhbGlkYXRlSW5wdXRzIiwiaW5wdXRMaXN0IiwiX2NoZWNrSW52YWxpZCIsImRpc2FibGVkIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwic29tZSIsInZhbGlkaXR5IiwidmFsaWQiLCJzcGFuRXJyb3IiLCJuZXh0RWxlbWVudFNpYmxpbmciLCJ0ZXh0Q29udGVudCIsInZhbGlkYXRpb25NZXNzYWdlIiwicmVzZXRWYWxpZGF0aW9uIiwiQ2FyZCIsImNhcmRzIiwic2VsZWN0b3IiLCJoYW5kbGVDb25maXJtIiwiY3VycmVudFVzZXJJZCIsImhhbmRsZUxpa2VzIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX2NhcmRJRCIsIl9pZCIsIl9vd25lcklEIiwib3duZXIiLCJfbGlrZXMiLCJsaWtlcyIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlQ29uZmlybSIsIl9jdXJyZW50VXNlcklkIiwiX2hhbmRsZUxpa2VzIiwiX2dldFRlbXBsYXRlIiwiZG9jdW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX3NldExpc3RlbmVycyIsImxpa2VCdXR0b24iLCJfY2FyZCIsImRlbGV0ZUJ1dHRvbiIsInN0eWxlIiwiZGlzcGxheSIsInVwZGF0ZUxpa2VzIiwiZGF0YSIsImxlbmd0aCIsImxpa2UiLCJnZW5lcmF0ZUNhcmQiLCJzcmMiLCJhbHQiLCJjb25zb2xlIiwibG9nIiwiaGFuZGxlTm9QaWNzIiwicGljdHVyZXMiLCJlbXB0eU1lc3NhZ2UiLCJpbnNlcnRBZGphY2VudEhUTUwiLCJ1c2VyaW1hZ2UiLCJ1c2VyaW1hZ2VFZGl0IiwicGFnZU9wYWNpdHkiLCJhYm91dElucHV0IiwibmFtZUlucHV0IiwiZm9ybVByb2ZpbGUiLCJmb3JtVXBsb2FkIiwiZm9ybUVkaXQiLCJidXR0b25BZGQiLCJwaG90b0NvbnRhaW5lciIsImZvcm1DbG9zZSIsImltYWdlQ2xvc2UiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXAiLCJfaXNPcGVuIiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsIm9wZW4iLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldnQiLCJzZXRFdmVudExpc3RlbmVycyIsImNvbnRhaW5zIiwidGFyZ2V0IiwiYnV0dG9uIiwiUG9wdXBXaXRoSW1hZ2UiLCJzdXBlciIsIl9wb3B1cFN1YnRpdGxlIiwiX3BvcHVwSW1hZ2UiLCJpbWFnZVNyYyIsInRpdGxlIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZVN1Ym1pdCIsInZhbGlkYXRvciIsIl9oYW5kbGVTdWJtaXQiLCJfaW5wdXRMaXN0IiwiX3ZhbGlkYXRvciIsIl9nZXRJbnB1dFZhbHVlcyIsImlucHV0VmFsdWVzIiwidmFsdWUiLCJDbG9zZUJ1dHRvbnMiLCJwcmV2ZW50RGVmYXVsdCIsIlVzZXJJbmZvIiwibmFtZVNlbGVjdG9yIiwiYWJvdXRTZWxlY3RvciIsInBpY3R1cmVTZWxlY3RvciIsIl9uYW1lRWxlbWVudCIsIl9hYm91dEVsZW1lbnQiLCJfcGljdHVyZUVsZW1lbnQiLCJnZXRVc2VySW5mbyIsImFib3V0IiwiYXZhdGFyIiwic2V0VXNlckluZm8iLCJBUEkiLCJfc3RhbmRhcmRVcmwiLCJ1cmwiLCJfaGVhZGVycyIsImhlYWRlcnMiLCJnZXRJbml0aWFsQ2FyZHMiLCJmZXRjaCIsInRoZW4iLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiY2F0Y2giLCJlcnIiLCJlcnJvciIsImdldFVzZXJEYXRhIiwic2F2ZVByb2ZpbGVDaGFuZ2VzIiwidXNlckRhdGEiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInVwZGF0ZVByb2ZpbGVQaWN0dXJlIiwiYWRkQ2FyZCIsImNhcmREYXRhIiwiZGVsZXRlQ2FyZCIsImNhcmRJZCIsImFkZExpa2UiLCJyZW1vdmVMaWtlIiwiU2VjdGlvbiIsInJlbmRlcmVyIiwiY29udGFpbmVyU2VsZWN0b3IiLCJfcmVuZGVyTGlzdCIsIl9yZW5kZXJNZXRob2QiLCJfcmVuZGVyQ29udGFpbmVyIiwiX2NsZWFyQ29udGFpbmVyIiwiaW5uZXJIVE1MIiwicmVuZGVySXRlbSIsImkiLCJzZXRJdGVtIiwicHJlcGVuZCIsInVzZXJJbmZvIiwiVXRpbEFQSSIsImF1dGhvcml6YXRpb24iLCJQcm9maWxlQ2FyZHMiLCJpdGVtIiwiY2FyZEVsZW1lbnQiLCJoYW5kbGVDYXJkQ2xpY2siLCJsaWtlQ291bnQiLCJzZXR1cFBvcHVwcyIsImNhcmQiLCJzdG9wUHJvcGFnYXRpb24iLCJJbWdTcmMiLCJwb3B1cCIsInJlbmRlckxvYWQiLCJ0ZXh0IiwiZWxlbWVudCIsImFwaSIsIlVzZXJWYWx1ZXMiLCJwb3B1cENvbmZpcm1hdGlvbiIsIl90YXJnZXQiLCJjYXJkSW5zdGFuY2UiLCJmb3JtUHJvZmlsZVZhbGlkYXRvciIsImZvcm1VcGxvYWRWYWxpZGF0b3IiLCJwb3B1cFByb2ZpbGUiLCJmaW5hbGx5IiwicG9wdXBVcGxvYWQiLCJuZXdDYXJkIiwiYWRkZWRDYXJkIiwiY3VycmVudFZhbHVlcyIsImZvcm1BdmF0YXJWYWxpZGF0b3IiLCJwb3B1cEF2YXRhciIsImF2YXRhclVybCIsInByb2ZpbGVVcmwiLCJvcGFjaXR5Il0sInNvdXJjZVJvb3QiOiIifQ==