!function(){"use strict";var e={d:function(t,r){for(var o in r)e.o(r,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:r[o]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}};e.d({},{M:function(){return U}});class t{constructor(e,t){this._inputs=Array.from(t.querySelectorAll(e.inputSelector)),this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._button=t.querySelector(e.submitButtonSelector),this._inactiveButtonClass=e.inactiveButtonClass}enableValidation(){this._toggleButton(this._inputs),this._inputs.forEach((e=>{e.addEventListener("input",(()=>{this._validateInputs(e),this._toggleButton(this._inputs)}))}))}_toggleButton(e){this._checkInvalid(e)?(this._button.disabled=!0,this._button.classList.add(this._inactiveButtonClass)):(this._button.disabled=!1,this._button.classList.remove(this._inactiveButtonClass))}_checkInvalid(e){return e.some((e=>!e.validity.valid))}_validateInputs(e){const t=e.nextElementSibling;e.validity.valid?(e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""):(e.classList.add(this._inputErrorClass),t.classList.add(this._errorClass),t.textContent=e.validationMessage)}resetValidation(){this._inputs.forEach((e=>{e.classList.remove(this._inputErrorClass);const t=e.nextElementSibling;t.classList.remove(this._errorClass),t.textContent=""})),this._toggleButton(this._inputs)}}class r{constructor(e,t,r,o,s){this._name=e.name,this._link=e.link,this._cardID=e._id,this._ownerID=e.owner._id,this._likes=e.likes,this._cardSelector=t,this._handleConfirm=r,this._currentUserId=o,this._handleLikes=s}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".photo__card").cloneNode(!0)}_setListeners(){const e=this._card.querySelector(".photo__like"),t=this._card.querySelector(".photo__delete");this._ownerID===this._currentUserId?t.addEventListener("click",(()=>{this._handleConfirm(this)})):t.style.display="none",e.addEventListener("click",(()=>this._handleLikes(this._cardID,this._card)))}updateLikes(e){const t=this._card.querySelector(".photo__like");this._card.querySelector(".photo__like-count").textContent=e.likes.length,e.likes.some((e=>e._id===this._currentUserId))?t.classList.add("photo__like_active"):t.classList.remove("photo__like_active")}generateCard(){return this._card=this._getTemplate(),this._card.querySelector(".photo__card-image").src=this._link,this._card.querySelector(".photo__card-image").alt=this._name,this._card.querySelector(".photo__text").textContent=this._name,this._card.querySelector(".photo__like-count").textContent=this._likes.length,this._likes.some((e=>e._id===this._currentUserId))&&this._card.querySelector(".photo__like").classList.add("photo__like_active"),console.log("Card generated:",this._card),this._setListeners(),this._card}handleNoPics(){const e=document.querySelectorAll(".photo__card"),t=document.querySelector(".photo__empty");0===e.length?document.querySelector(".photo").insertAdjacentHTML("afterbegin",'<p class="photo__empty">NO PICTURES</p>'):t&&t.remove()}}document.querySelector(".user__name"),document.querySelector(".user__role");const o=document.querySelector(".user__image"),s=document.querySelector(".user__image-edit"),n=document.querySelector(".page__opacity"),i=(document.querySelectorAll(".photo__card"),document.querySelector(".photo__empty"),document.querySelector("#TitleInput"),document.querySelector("#LinkInput"),document.querySelector("#AboutInput")),a=document.querySelector("#NameInput"),c=document.querySelector("#FormProfile"),l=document.querySelector("#FormUpload"),d=document.querySelector(".user__edit"),u=document.querySelector(".user__add"),_=document.querySelector(".photo"),h=document.querySelectorAll(".form__btn-close"),p=document.querySelector(".popup__close");document.querySelector(".popup__image"),document.querySelector(".popup__image-subtitle");class m{constructor(e){this._popup=document.querySelector(e),this._isOpen=!1,this._handleEscClose=this._handleEscClose.bind(this)}open(){n.classList.add("page__opacity-toggled"),n.style.display="block",document.addEventListener("keydown",this._handleEscClose),this._isOpen=!0}close(){n.classList.remove("page__opacity-toggled"),n.style.display="none",document.removeEventListener("keydown",this._handleEscClose),this._isOpen=!1}_handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){document.addEventListener("click",(e=>{n.contains(e.target)&&this.close()})),p.addEventListener("click",(()=>{this.close()})),h.forEach((e=>{e.addEventListener("click",(()=>{this.close()}))}))}}class v extends m{constructor(e){super(e),this._popupSubtitle=this._popup.querySelector(".popup__image-subtitle"),this._popupImage=this._popup.querySelector(".popup__image")}open(e,t){super.open(),this._popup.style.display="inline-block",this._popupImage.src=e,this._popupSubtitle.textContent=t}close(){super.close(),this._popup.style.display="none",this._popupImage.src="",this._popupSubtitle.textContent=""}setEventListeners(){super.setEventListeners(),document.addEventListener("click",(()=>{this._isOpen&&this.close()}))}}class y extends m{constructor(e,t,r){super(e),this._handleSubmit=t.bind(this),this._inputList=this._popup.querySelectorAll(".form__input"),this._validator=r}_getInputValues(){const e={};return this._inputList.forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){super.setEventListeners();const e=document.querySelectorAll(".form__btn-close");this._popup.addEventListener("submit",(e=>{e.preventDefault(),this._handleSubmit(this._getInputValues())})),e.forEach((e=>{e.addEventListener("click",(()=>{this.close()}))}))}close(){super.close(),this._getInputValues(),this._popup.classList.remove("form_opened"),this._inputList.forEach((e=>{e.value="",console.log("cleared")}))}open(){super.open(),this._popup.classList.add("form_opened"),this._validator.resetValidation()}}class f{constructor({nameSelector:e,aboutSelector:t,pictureSelector:r}){this._nameElement=document.querySelector(e),this._aboutElement=document.querySelector(t),this._pictureElement=document.querySelector(r)}getUserInfo(){return{name:this._nameElement.textContent,about:this._aboutElement.textContent,avatar:this._pictureElement.src}}setUserInfo({name:e,about:t,avatar:r}){console.log("Setting user info:",{name:e,about:t,avatar:r}),this._nameElement.textContent=e,this._aboutElement.textContent=t,r&&(this._pictureElement.src=r)}}class S{constructor(e){this._standardUrl=e.url,this._headers=e.headers}getInitialCards(){return fetch(`${this._standardUrl}/cards`,{headers:this._headers}).then((e=>e.ok?(console.log("cards loaded successfully"),e.json()):Promise.reject(`Error: ${e.status}`))).catch((e=>(console.error("Error in getInitialCards:",e),Promise.reject(e))))}getUserData(){return fetch(`${this._standardUrl}/users/me`,{headers:this._headers}).then((e=>e.ok?(console.log(e),e.json()):Promise.reject(`Error: ${e.status}`))).catch((e=>(console.error("Error in getUserData:",e),Promise.reject(e))))}saveProfileChanges(e){return console.log("Saving profile changes:",e),fetch(`${this._standardUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.name,about:e.about})}).then((e=>(console.log("Received response:",e),e.ok?e.json():Promise.reject(`Error: ${e.status}`)))).catch((e=>(console.error("Error in saveProfileChanges:",e),Promise.reject(e))))}updateProfilePicture({avatar:e}){return console.log("Updating profile picture with URL:",e),fetch(`${this._standardUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then((e=>(console.log("Received response:",e),e.ok?e.json():Promise.reject(`Error: ${e.status}`)))).catch((e=>(console.error("Error in updateProfilePicture:",e),Promise.reject(e))))}addCard(e){return fetch(`${this._standardUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:e.name,link:e.link})}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`))).catch((e=>(console.error("Error in addCard:",e),Promise.reject(e))))}deleteCard(e){return fetch(`${this._standardUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`))).catch((e=>(console.error("Error in deleteCard:",e),Promise.reject(e))))}addLike(e){return fetch(`${this._standardUrl}/cards/likes/${e}`,{method:"PUT",headers:this._headers}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`))).catch((e=>(console.error("Error in addLike:",e),Promise.reject(e))))}removeLike(e){return fetch(`${this._standardUrl}/cards/likes/${e}`,{method:"DELETE",headers:this._headers}).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`))).catch((e=>(console.error("Error in removeLike:",e),Promise.reject(e))))}}class g{constructor({data:e,renderer:t},r){this._renderList=e,this._renderMethod=t,this._renderContainer=r}_clearContainer(){this._renderContainer.innerHTML=""}renderItem(){this._clearContainer(),this._renderList.forEach((e=>{this._renderMethod(e)}))}setItem(e){this._renderContainer.prepend(e)}}const E=new f({nameSelector:".user__name",aboutSelector:".user__role",pictureSelector:".user__image-main"}),C=new S({url:"https://around.nomoreparties.co/v1/web-ptbr-cohort-11",headers:{authorization:"ef61af7f-62bd-42c6-ac64-de2d2731292b","Content-type":"application/json"}}),b=new g({data:[],renderer:e=>{const t=new r(e,"#card-template",handleCardClick).generateCard();b.setItem(t)}},_);function L(e,t){const r=t.querySelector(".photo__like"),o=t.querySelector(".photo__like-count");r.classList.contains("photo__like_active")?C.removeLike(e).then((e=>{r.classList.remove("photo__like_active"),o.textContent=e.likes.length})).catch((e=>{console.error(e)})):C.addLike(e).then((e=>{r.classList.add("photo__like_active"),o.textContent=e.likes.length})).catch((e=>{console.error(e)}))}function k(e){document.querySelectorAll(e).forEach((e=>e.querySelector(".photo__card-image").addEventListener("click",(t=>{t.stopPropagation();const r=e.querySelector(".photo__card-image").src,o=e.querySelector(".photo__text").textContent,s=new v(".popup");s.open(r,o),s.setEventListeners(".photo__card")}))))}function q(e,t){const r=document.querySelector(e);r?r.textContent=t:console.error(`Element with selector ${e} not found`)}const P=new S({url:"https://around.nomoreparties.co/v1/web-ptbr-cohort-11",headers:{authorization:"ef61af7f-62bd-42c6-ac64-de2d2731292b","Content-type":"application/json"}}),I=new f({nameSelector:".user__name",aboutSelector:".user__role",pictureSelector:".user__image-main"}),U=new class extends m{constructor(e,t){super(e),this._handleSubmit=t}open(e){super.open(),this._target=e,this._popup.classList.add("form_opened")}close(){super.close(),this._popup.classList.remove("form_opened")}setEventListeners(){super.setEventListeners(),this._popup.addEventListener("submit",(e=>{e.preventDefault(),this._handleSubmit(this._target),this.close()}))}}("#SubmitCheck",(e=>{C.deleteCard(e._cardID).then((()=>{e._card.remove()})).catch((e=>{console.log(e)})),U.close()}));let j;U.setEventListeners(),P.getUserData().then((e=>{I.setUserInfo(e),j=e._id,P.getInitialCards().then((e=>{const t=new g({data:e,renderer:e=>{const o=new r(e,"#card-template",(e=>U.open(e)),j,L).generateCard();t.setItem(o)}},_);t.renderItem(),k(".photo__card")})).catch((e=>{console.error("Failed to load initial cards:",e)}))})).catch((e=>{console.error("Failed to fetch user data:",e)}));const w=new t({inputSelector:".form__input",submitButtonSelector:".form__button",inactiveButtonClass:"form__button-disabled",inputErrorClass:"form__input-invalid",errorClass:"form__input-error"},c);w.enableValidation();const x=new t({inputSelector:".form__input",submitButtonSelector:".form__button",inactiveButtonClass:"form__button-disabled",inputErrorClass:"form__input-invalid",errorClass:"form__input-error"},l);x.enableValidation();const B=new y("#FormProfile",(function(e){return q("#UserUploadButton","Salvando..."),""!==e.name&&""!==e.about?(this.close(),C.saveProfileChanges(e).then((e=>{console.log("Profile changes saved successfully:",e),E.setUserInfo(e),document.querySelector("#FormProfile").classList.remove("form_opened")})).catch((e=>{console.error("Failed to save profile changes:",e)})).finally((()=>q("#UserUploadButton","Salvar")))):Promise.reject("Invalid input values")}),w);B.setEventListeners();const $=new y("#FormUpload",(function(e,t){if(q("#CardUploadButton","Criando..."),""!==e.url&&""!==e.title){const o={name:e.title,link:e.url};C.addCard(o).then((e=>{e.owner={_id:t};const o=new r(e,"#card-template",(e=>U.open(e)),t,L).generateCard();document.querySelector(".photo").prepend(o),k(".photo__card"),this.close()})).catch((e=>{console.error("Failed to add new card:",e)})).finally((()=>q("#CardUploadButton","Criar")))}else console.error("Title and URL cannot be empty")}),x);$.setEventListeners(),d.addEventListener("click",(()=>{B.open();const e=I.getUserInfo();a.value=e.name,i.value=e.about})),u.addEventListener("click",(()=>{$.open()}));const T=new t({inputSelector:".form__input",submitButtonSelector:".form__button",inactiveButtonClass:"form__button-disabled",inputErrorClass:"form__input-invalid",errorClass:"form__input-error"},document.querySelector("#FormProfilePicture"));T.enableValidation();const A=new y("#FormProfilePicture",(e=>{q("#PictureUploadButton","Salvando...");const t=e.profileUrl;P.updateProfilePicture({avatar:t}).then((e=>{I.setUserInfo({...e,avatar:e.avatar}),A.close()})).catch((e=>{console.error("Failed to update profile picture:",e)})).finally((()=>q("#PictureUploadButton","Salvar")))}),T);A.setEventListeners(),o.addEventListener("click",(()=>{A.open()})),o.addEventListener("mouseover",(()=>{o.querySelector(".user__image-main").style.opacity="25%",s.style.display="block"})),o.addEventListener("mouseout",(()=>{o.querySelector(".user__image-main").style.opacity="100%",s.style.display="none"}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Qix3QkFDckJQLGdCQUFpQixzQkFDakJFLFdBQVkscUJBRWQrQyxTQUFTN0MsY0FBYyx3QkFFekJpTSxFQUFvQjdMLG1CQUVwQixNQUFNOEwsRUFBYyxJQUFJL0YsRUFDdEIsdUJBNUI4Qk8sSUFDOUJ1RSxFQUFXLHVCQUF3QixlQUNuQyxNQUFNa0IsRUFBWXpGLEVBQVkwRixXQUM5QmhCLEVBQ0duQyxxQkFBcUIsQ0FBRTFCLE9BQVE0RSxJQUMvQm5FLE1BQU1ZLElBQ0x5QyxFQUFXN0QsWUFBWSxJQUFLb0IsRUFBVXJCLE9BQVFxQixFQUFTckIsU0FDdkQyRSxFQUFZNUcsT0FBTyxJQUVwQmlELE9BQU9DLElBQ04zRSxRQUFRNEUsTUFBTSxvQ0FBcUNELEVBQUksSUFFeERvRCxTQUFRLElBQU1YLEVBQVcsdUJBQXdCLFdBQVUsR0FrQjlEZ0IsR0FFRkMsRUFBWXpHLG9CQUVadEIsRUFBVTNELGlCQUFpQixTQUFTLEtBQ2xDMEwsRUFBWTdHLE1BQU0sSURuQ2xCbEIsRUFBVTNELGlCQUFpQixhQUFhLEtBQ3RDMkQsRUFBVW5FLGNBQWMscUJBQXFCb0QsTUFBTWlKLFFBQVUsTUFDN0RqSSxFQUFjaEIsTUFBTUMsUUFBVSxPQUFPLElBRXZDYyxFQUFVM0QsaUJBQWlCLFlBQVksS0FDckMyRCxFQUFVbkUsY0FBYyxxQkFBcUJvRCxNQUFNaUosUUFBVSxPQUM3RGpJLEVBQWNoQixNQUFNQyxRQUFVLE1BQU0sRyIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9jb21wb25lbnRzL1ZhbGlkYXRlLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9BUEkuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvdXRpbHMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBkZWZpbml0aW9uKSB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iaiwgcHJvcCkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCk7IH0iLCJleHBvcnQgY2xhc3MgVmFsaWRhdGUge1xuICBjb25zdHJ1Y3RvcihzZWxlY3RvcnMsIGZvcm1TZWxlY3Rvcikge1xuICAgIHRoaXMuX2lucHV0cyA9IEFycmF5LmZyb20oXG4gICAgICBmb3JtU2VsZWN0b3IucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcnMuaW5wdXRTZWxlY3RvcilcbiAgICApO1xuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHNlbGVjdG9ycy5pbnB1dEVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IHNlbGVjdG9ycy5lcnJvckNsYXNzO1xuICAgIHRoaXMuX2J1dHRvbiA9IGZvcm1TZWxlY3Rvci5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHNlbGVjdG9ycy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xuICB9XG5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl90b2dnbGVCdXR0b24odGhpcy5faW5wdXRzKTtcbiAgICB0aGlzLl9pbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX3ZhbGlkYXRlSW5wdXRzKGlucHV0KTtcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uKHRoaXMuX2lucHV0cyk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIF90b2dnbGVCdXR0b24oaW5wdXRMaXN0KSB7XG4gICAgaWYgKHRoaXMuX2NoZWNrSW52YWxpZChpbnB1dExpc3QpKSB7XG4gICAgICB0aGlzLl9idXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgdGhpcy5fYnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2J1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5fYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgfVxuICB9XG5cbiAgX2NoZWNrSW52YWxpZChpbnB1dExpc3QpIHtcbiAgICByZXR1cm4gaW5wdXRMaXN0LnNvbWUoKGlucHV0KSA9PiAhaW5wdXQudmFsaWRpdHkudmFsaWQpO1xuICB9XG5cbiAgX3ZhbGlkYXRlSW5wdXRzKGlucHV0KSB7XG4gICAgY29uc3Qgc3BhbkVycm9yID0gaW5wdXQubmV4dEVsZW1lbnRTaWJsaW5nO1xuICAgIGlmICghaW5wdXQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIGlucHV0LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICAgIHNwYW5FcnJvci5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICAgICAgc3BhbkVycm9yLnRleHRDb250ZW50ID0gaW5wdXQudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlucHV0LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICAgIHNwYW5FcnJvci5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICAgICAgc3BhbkVycm9yLnRleHRDb250ZW50ID0gXCJcIjtcbiAgICB9XG4gIH1cblxuICByZXNldFZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5faW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBpbnB1dC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgICBjb25zdCBzcGFuRXJyb3IgPSBpbnB1dC5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgICBzcGFuRXJyb3IuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcbiAgICAgIHNwYW5FcnJvci50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgfSk7XG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uKHRoaXMuX2lucHV0cyk7XG4gIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoY2FyZHMsIHNlbGVjdG9yLCBoYW5kbGVDb25maXJtLCBjdXJyZW50VXNlcklkLCBoYW5kbGVMaWtlcykge1xuICAgIHRoaXMuX25hbWUgPSBjYXJkcy5uYW1lO1xuICAgIHRoaXMuX2xpbmsgPSBjYXJkcy5saW5rO1xuICAgIHRoaXMuX2NhcmRJRCA9IGNhcmRzLl9pZDtcbiAgICB0aGlzLl9vd25lcklEID0gY2FyZHMub3duZXIuX2lkO1xuICAgIHRoaXMuX2xpa2VzID0gY2FyZHMubGlrZXM7XG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gc2VsZWN0b3I7XG4gICAgdGhpcy5faGFuZGxlQ29uZmlybSA9IGhhbmRsZUNvbmZpcm07XG4gICAgdGhpcy5fY3VycmVudFVzZXJJZCA9IGN1cnJlbnRVc2VySWQ7XG4gICAgdGhpcy5faGFuZGxlTGlrZXMgPSBoYW5kbGVMaWtlcztcbiAgfVxuXG4gIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICBjb25zdCBjYXJkVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcikuY29udGVudDtcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmRUZW1wbGF0ZVxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIucGhvdG9fX2NhcmRcIilcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgcmV0dXJuIGNhcmRFbGVtZW50O1xuICB9XG5cbiAgX3NldExpc3RlbmVycygpIHtcbiAgICBjb25zdCBsaWtlQnV0dG9uID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFwiLnBob3RvX19saWtlXCIpO1xuICAgIGNvbnN0IGRlbGV0ZUJ1dHRvbiA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5waG90b19fZGVsZXRlXCIpO1xuICAgIGlmICh0aGlzLl9vd25lcklEID09PSB0aGlzLl9jdXJyZW50VXNlcklkKSB7XG4gICAgICBkZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5faGFuZGxlQ29uZmlybSh0aGlzKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBkZWxldGVCdXR0b24uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiOyAvLyBFc2NvbmRlIG8gYm90YW8gZGUgZGVsZXRhciBjYXNvIHVzdWFyaW8gbmFvIGZvciBvIGRvbm9cbiAgICB9XG5cbiAgICBsaWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PlxuICAgICAgdGhpcy5faGFuZGxlTGlrZXModGhpcy5fY2FyZElELCB0aGlzLl9jYXJkKVxuICAgICk7XG4gIH1cblxuICB1cGRhdGVMaWtlcyhkYXRhKSB7XG4gICAgY29uc3QgbGlrZUJ1dHRvbiA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5waG90b19fbGlrZVwiKTtcbiAgICBjb25zdCBsaWtlQ291bnQgPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIucGhvdG9fX2xpa2UtY291bnRcIik7XG5cbiAgICBsaWtlQ291bnQudGV4dENvbnRlbnQgPSBkYXRhLmxpa2VzLmxlbmd0aDtcblxuICAgIGlmIChkYXRhLmxpa2VzLnNvbWUoKGxpa2UpID0+IGxpa2UuX2lkID09PSB0aGlzLl9jdXJyZW50VXNlcklkKSkge1xuICAgICAgbGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwicGhvdG9fX2xpa2VfYWN0aXZlXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBsaWtlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJwaG90b19fbGlrZV9hY3RpdmVcIik7XG4gICAgfVxuICB9XG5cbiAgZ2VuZXJhdGVDYXJkKCkge1xuICAgIHRoaXMuX2NhcmQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuICAgIHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5waG90b19fY2FyZC1pbWFnZVwiKS5zcmMgPSB0aGlzLl9saW5rO1xuICAgIHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5waG90b19fY2FyZC1pbWFnZVwiKS5hbHQgPSB0aGlzLl9uYW1lO1xuICAgIHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5waG90b19fdGV4dFwiKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG4gICAgdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFwiLnBob3RvX19saWtlLWNvdW50XCIpLnRleHRDb250ZW50ID1cbiAgICAgIHRoaXMuX2xpa2VzLmxlbmd0aDtcblxuICAgIGlmICh0aGlzLl9saWtlcy5zb21lKChsaWtlKSA9PiBsaWtlLl9pZCA9PT0gdGhpcy5fY3VycmVudFVzZXJJZCkpIHtcbiAgICAgIHRoaXMuX2NhcmRcbiAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIucGhvdG9fX2xpa2VcIilcbiAgICAgICAgLmNsYXNzTGlzdC5hZGQoXCJwaG90b19fbGlrZV9hY3RpdmVcIik7XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coXCJDYXJkIGdlbmVyYXRlZDpcIiwgdGhpcy5fY2FyZCk7IC8vIERlYnVnIGxvZ1xuICAgIHRoaXMuX3NldExpc3RlbmVycygpO1xuICAgIHJldHVybiB0aGlzLl9jYXJkO1xuICB9XG5cbiAgaGFuZGxlTm9QaWNzKCkge1xuICAgIGNvbnN0IHBpY3R1cmVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5waG90b19fY2FyZFwiKTtcbiAgICBjb25zdCBlbXB0eU1lc3NhZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBob3RvX19lbXB0eVwiKTtcbiAgICBpZiAocGljdHVyZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICBkb2N1bWVudFxuICAgICAgICAucXVlcnlTZWxlY3RvcihcIi5waG90b1wiKVxuICAgICAgICAuaW5zZXJ0QWRqYWNlbnRIVE1MKFxuICAgICAgICAgIFwiYWZ0ZXJiZWdpblwiLFxuICAgICAgICAgIGA8cCBjbGFzcz1cInBob3RvX19lbXB0eVwiPk5PIFBJQ1RVUkVTPC9wPmBcbiAgICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGVtcHR5TWVzc2FnZSkge1xuICAgICAgICBlbXB0eU1lc3NhZ2UucmVtb3ZlKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iLCJleHBvcnQgY29uc3QgdXNlcm5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnVzZXJfX25hbWVcIik7XG5leHBvcnQgY29uc3QgdXNlcmFib3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi51c2VyX19yb2xlXCIpO1xuZXhwb3J0IGNvbnN0IHVzZXJpbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudXNlcl9faW1hZ2VcIik7XG5leHBvcnQgY29uc3QgdXNlcmltYWdlRWRpdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudXNlcl9faW1hZ2UtZWRpdFwiKTtcbmV4cG9ydCBjb25zdCBwYWdlT3BhY2l0eSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGFnZV9fb3BhY2l0eVwiKTtcbmV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gIHtcbiAgICBuYW1lOiBcIlZhbGUgZGUgWW9zZW1pdGVcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vd2ViLWNvZGUvbW92ZWRfeW9zZW1pdGUuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxhZ28gTG91aXNlXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3dlYi1jb2RlL21vdmVkX2xha2UtbG91aXNlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJNb250YW5oYXMgQ2FyZWNhc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS93ZWItY29kZS9tb3ZlZF9iYWxkLW1vdW50YWlucy5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS93ZWItY29kZS9tb3ZlZF9sYXRlbWFyLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJQYXJxdWUgTmFjaW9uYWwgZGEgVmFub2lzZSBcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vd2ViLWNvZGUvbW92ZWRfdmFub2lzZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vd2ViLWNvZGUvbW92ZWRfbGFnby5qcGdcIixcbiAgfSxcbl07XG5leHBvcnQgY29uc3QgcGljdHVyZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBob3RvX19jYXJkXCIpO1xuZXhwb3J0IGNvbnN0IGVtcHR5TWVzc2FnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGhvdG9fX2VtcHR5XCIpO1xuZXhwb3J0IGNvbnN0IHRpdGxlSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI1RpdGxlSW5wdXRcIik7XG5leHBvcnQgY29uc3QgbGlua0lucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNMaW5rSW5wdXRcIik7XG5leHBvcnQgY29uc3QgYWJvdXRJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjQWJvdXRJbnB1dFwiKTtcbmV4cG9ydCBjb25zdCBuYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI05hbWVJbnB1dFwiKTtcbmV4cG9ydCBjb25zdCBmb3JtUHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjRm9ybVByb2ZpbGVcIik7XG5leHBvcnQgY29uc3QgZm9ybVVwbG9hZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjRm9ybVVwbG9hZFwiKTtcbmV4cG9ydCBjb25zdCBmb3JtRWRpdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudXNlcl9fZWRpdFwiKTtcbmV4cG9ydCBjb25zdCBidXR0b25BZGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnVzZXJfX2FkZFwiKTtcbmV4cG9ydCBjb25zdCBwaG90b0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGhvdG9cIik7XG5leHBvcnQgY29uc3QgZm9ybUNsb3NlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5mb3JtX19idG4tY2xvc2VcIik7XG5leHBvcnQgY29uc3QgaW1hZ2VDbG9zZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Nsb3NlXCIpO1xuZXhwb3J0IGNvbnN0IHBvcHVwSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWFnZVwiKTtcbmV4cG9ydCBjb25zdCBwb3B1cEltYWdlU3VidGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIi5wb3B1cF9faW1hZ2Utc3VidGl0bGVcIlxuKTtcbiIsImltcG9ydCB7IHBhZ2VPcGFjaXR5LCBpbWFnZUNsb3NlLCBmb3JtQ2xvc2UgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5faXNPcGVuID0gZmFsc2U7XG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xuICB9XG4gIG9wZW4oKSB7XG4gICAgcGFnZU9wYWNpdHkuY2xhc3NMaXN0LmFkZChcInBhZ2VfX29wYWNpdHktdG9nZ2xlZFwiKTtcbiAgICBwYWdlT3BhY2l0eS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgICB0aGlzLl9pc09wZW4gPSB0cnVlO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgcGFnZU9wYWNpdHkuY2xhc3NMaXN0LnJlbW92ZShcInBhZ2VfX29wYWNpdHktdG9nZ2xlZFwiKTtcbiAgICBwYWdlT3BhY2l0eS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICAgIHRoaXMuX2lzT3BlbiA9IGZhbHNlO1xuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcbiAgICAgIGlmIChwYWdlT3BhY2l0eS5jb250YWlucyhldnQudGFyZ2V0KSkge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgaW1hZ2VDbG9zZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0pO1xuICAgIGZvcm1DbG9zZS5mb3JFYWNoKChidXR0b24pID0+IHtcbiAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9wb3B1cFN1YnRpdGxlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW1hZ2Utc3VidGl0bGVcIik7XG4gICAgdGhpcy5fcG9wdXBJbWFnZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlXCIpO1xuICB9XG4gIG9wZW4oaW1hZ2VTcmMsIHRpdGxlKSB7XG4gICAgc3VwZXIub3BlbigpO1xuICAgIHRoaXMuX3BvcHVwLnN0eWxlLmRpc3BsYXkgPSBcImlubGluZS1ibG9ja1wiO1xuICAgIHRoaXMuX3BvcHVwSW1hZ2Uuc3JjID0gaW1hZ2VTcmM7XG4gICAgdGhpcy5fcG9wdXBTdWJ0aXRsZS50ZXh0Q29udGVudCA9IHRpdGxlO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgICB0aGlzLl9wb3B1cC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgdGhpcy5fcG9wdXBJbWFnZS5zcmMgPSBcIlwiO1xuICAgIHRoaXMuX3BvcHVwU3VidGl0bGUudGV4dENvbnRlbnQgPSBcIlwiO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgaWYgKHRoaXMuX2lzT3Blbikge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZVN1Ym1pdCwgdmFsaWRhdG9yKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5faGFuZGxlU3VibWl0ID0gaGFuZGxlU3VibWl0LmJpbmQodGhpcyk7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvckFsbChcIi5mb3JtX19pbnB1dFwiKTtcbiAgICB0aGlzLl92YWxpZGF0b3IgPSB2YWxpZGF0b3I7XG4gIH1cblxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7fTtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIGlucHV0VmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIGlucHV0VmFsdWVzO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICBjb25zdCBDbG9zZUJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmZvcm1fX2J0bi1jbG9zZVwiKTtcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5faGFuZGxlU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xuICAgIH0pO1xuICAgIENsb3NlQnV0dG9ucy5mb3JFYWNoKChidXR0b24pID0+IHtcbiAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgdGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKTtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwiZm9ybV9vcGVuZWRcIik7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBpbnB1dC52YWx1ZSA9IFwiXCI7XG4gICAgICBjb25zb2xlLmxvZyhcImNsZWFyZWRcIik7XG4gICAgfSk7XG4gIH1cblxuICBvcGVuKCkge1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKFwiZm9ybV9vcGVuZWRcIik7XG4gICAgdGhpcy5fdmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhDb25maXJtYXRpb24gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZVN1Ym1pdCkge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCA9IGhhbmRsZVN1Ym1pdDtcbiAgfVxuXG4gIG9wZW4odGFyZ2V0KSB7XG4gICAgc3VwZXIub3BlbigpO1xuICAgIHRoaXMuX3RhcmdldCA9IHRhcmdldDtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKFwiZm9ybV9vcGVuZWRcIik7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICBzdXBlci5jbG9zZSgpO1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoXCJmb3JtX29wZW5lZFwiKTtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCh0aGlzLl90YXJnZXQpO1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0pO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHsgbmFtZVNlbGVjdG9yLCBhYm91dFNlbGVjdG9yLCBwaWN0dXJlU2VsZWN0b3IgfSkge1xuICAgIHRoaXMuX25hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xuICAgIHRoaXMuX2Fib3V0RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYWJvdXRTZWxlY3Rvcik7XG4gICAgdGhpcy5fcGljdHVyZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBpY3R1cmVTZWxlY3Rvcik7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQsXG4gICAgICBhYm91dDogdGhpcy5fYWJvdXRFbGVtZW50LnRleHRDb250ZW50LFxuICAgICAgYXZhdGFyOiB0aGlzLl9waWN0dXJlRWxlbWVudC5zcmMsXG4gICAgfTtcbiAgfVxuXG4gIHNldFVzZXJJbmZvKHsgbmFtZSwgYWJvdXQsIGF2YXRhciB9KSB7XG4gICAgY29uc29sZS5sb2coXCJTZXR0aW5nIHVzZXIgaW5mbzpcIiwgeyBuYW1lLCBhYm91dCwgYXZhdGFyIH0pO1xuICAgIHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50ID0gbmFtZTtcbiAgICB0aGlzLl9hYm91dEVsZW1lbnQudGV4dENvbnRlbnQgPSBhYm91dDtcbiAgICBpZiAoYXZhdGFyKSB7XG4gICAgICB0aGlzLl9waWN0dXJlRWxlbWVudC5zcmMgPSBhdmF0YXI7XG4gICAgfVxuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBUEkge1xuICBjb25zdHJ1Y3RvcihkYXRhKSB7XG4gICAgdGhpcy5fc3RhbmRhcmRVcmwgPSBkYXRhLnVybDtcbiAgICB0aGlzLl9oZWFkZXJzID0gZGF0YS5oZWFkZXJzO1xuICB9XG5cbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9zdGFuZGFyZFVybH0vY2FyZHNgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcImNhcmRzIGxvYWRlZCBzdWNjZXNzZnVsbHlcIik7XG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBpbiBnZXRJbml0aWFsQ2FyZHM6XCIsIGVycik7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnIpO1xuICAgICAgfSk7XG4gIH1cblxuICBnZXRVc2VyRGF0YSgpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fc3RhbmRhcmRVcmx9L3VzZXJzL21lYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgY29uc29sZS5sb2cocmVzKTtcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGluIGdldFVzZXJEYXRhOlwiLCBlcnIpO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgc2F2ZVByb2ZpbGVDaGFuZ2VzKHVzZXJEYXRhKSB7XG4gICAgY29uc29sZS5sb2coXCJTYXZpbmcgcHJvZmlsZSBjaGFuZ2VzOlwiLCB1c2VyRGF0YSk7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3N0YW5kYXJkVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZTogdXNlckRhdGEubmFtZSxcbiAgICAgICAgYWJvdXQ6IHVzZXJEYXRhLmFib3V0LFxuICAgICAgfSksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coXCJSZWNlaXZlZCByZXNwb25zZTpcIiwgcmVzKTtcbiAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgaW4gc2F2ZVByb2ZpbGVDaGFuZ2VzOlwiLCBlcnIpO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgdXBkYXRlUHJvZmlsZVBpY3R1cmUoeyBhdmF0YXIgfSkge1xuICAgIGNvbnNvbGUubG9nKFwiVXBkYXRpbmcgcHJvZmlsZSBwaWN0dXJlIHdpdGggVVJMOlwiLCBhdmF0YXIpO1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9zdGFuZGFyZFVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBhdmF0YXIgfSksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coXCJSZWNlaXZlZCByZXNwb25zZTpcIiwgcmVzKTtcbiAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgaW4gdXBkYXRlUHJvZmlsZVBpY3R1cmU6XCIsIGVycik7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnIpO1xuICAgICAgfSk7XG4gIH1cblxuICBhZGRDYXJkKGNhcmREYXRhKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3N0YW5kYXJkVXJsfS9jYXJkc2AsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lOiBjYXJkRGF0YS5uYW1lLFxuICAgICAgICBsaW5rOiBjYXJkRGF0YS5saW5rLFxuICAgICAgfSksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgaW4gYWRkQ2FyZDpcIiwgZXJyKTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycik7XG4gICAgICB9KTtcbiAgfVxuXG4gIGRlbGV0ZUNhcmQoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3N0YW5kYXJkVXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGluIGRlbGV0ZUNhcmQ6XCIsIGVycik7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnIpO1xuICAgICAgfSk7XG4gIH1cblxuICBhZGRMaWtlKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9zdGFuZGFyZFVybH0vY2FyZHMvbGlrZXMvJHtjYXJkSWR9YCwge1xuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBpbiBhZGRMaWtlOlwiLCBlcnIpO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgcmVtb3ZlTGlrZShjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fc3RhbmRhcmRVcmx9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgaW4gcmVtb3ZlTGlrZTpcIiwgZXJyKTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycik7XG4gICAgICB9KTtcbiAgfVxufVxuIiwiZXhwb3J0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7IGRhdGEsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcmVuZGVyTGlzdCA9IGRhdGE7XG4gICAgdGhpcy5fcmVuZGVyTWV0aG9kID0gcmVuZGVyZXI7XG4gICAgdGhpcy5fcmVuZGVyQ29udGFpbmVyID0gY29udGFpbmVyU2VsZWN0b3I7XG4gIH1cblxuICBfY2xlYXJDb250YWluZXIoKSB7XG4gICAgdGhpcy5fcmVuZGVyQ29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7XG4gIH1cblxuICByZW5kZXJJdGVtKCkge1xuICAgIHRoaXMuX2NsZWFyQ29udGFpbmVyKCk7XG4gICAgdGhpcy5fcmVuZGVyTGlzdC5mb3JFYWNoKChpKSA9PiB7XG4gICAgICB0aGlzLl9yZW5kZXJNZXRob2QoaSk7XG4gICAgfSk7XG4gIH1cblxuICBzZXRJdGVtKGkpIHtcbiAgICB0aGlzLl9yZW5kZXJDb250YWluZXIucHJlcGVuZChpKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgQ2FyZCB9IGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IHsgUG9wdXBXaXRoQ29uZmlybWF0aW9uLCBQb3B1cFdpdGhJbWFnZSB9IGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwLmpzXCI7XG5pbXBvcnQgeyBwaG90b0NvbnRhaW5lciwgdXNlcmltYWdlLCB1c2VyaW1hZ2VFZGl0IH0gZnJvbSBcIi4vY29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgQVBJIGZyb20gXCIuLi9jb21wb25lbnRzL0FQSS5qc1wiO1xuaW1wb3J0IHsgU2VjdGlvbiB9IGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCB7IHBvcHVwQ29uZmlybWF0aW9uIH0gZnJvbSBcIi4uL3BhZ2VzL2luZGV4LmpzXCI7XG5cbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcbiAgbmFtZVNlbGVjdG9yOiBcIi51c2VyX19uYW1lXCIsXG4gIGFib3V0U2VsZWN0b3I6IFwiLnVzZXJfX3JvbGVcIixcbiAgcGljdHVyZVNlbGVjdG9yOiBcIi51c2VyX19pbWFnZS1tYWluXCIsXG59KTtcbmNvbnN0IFV0aWxBUEkgPSBuZXcgQVBJKHtcbiAgdXJsOiBcImh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvd2ViLXB0YnItY29ob3J0LTExXCIsXG4gIGhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiBcImVmNjFhZjdmLTYyYmQtNDJjNi1hYzY0LWRlMmQyNzMxMjkyYlwiLFxuICAgIFwiQ29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICB9LFxufSk7XG5cbmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdChpbnB1dFZhbHVlcykge1xuICByZW5kZXJMb2FkKFwiI1VzZXJVcGxvYWRCdXR0b25cIiwgXCJTYWx2YW5kby4uLlwiKTtcbiAgaWYgKGlucHV0VmFsdWVzLm5hbWUgIT09IFwiXCIgJiYgaW5wdXRWYWx1ZXMuYWJvdXQgIT09IFwiXCIpIHtcbiAgICB0aGlzLmNsb3NlKCk7XG4gICAgcmV0dXJuIFV0aWxBUEkuc2F2ZVByb2ZpbGVDaGFuZ2VzKGlucHV0VmFsdWVzKVxuICAgICAgLnRoZW4oKHVzZXJEYXRhKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiUHJvZmlsZSBjaGFuZ2VzIHNhdmVkIHN1Y2Nlc3NmdWxseTpcIiwgdXNlckRhdGEpO1xuICAgICAgICB1c2VySW5mby5zZXRVc2VySW5mbyh1c2VyRGF0YSk7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjRm9ybVByb2ZpbGVcIikuY2xhc3NMaXN0LnJlbW92ZShcImZvcm1fb3BlbmVkXCIpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gc2F2ZSBwcm9maWxlIGNoYW5nZXM6XCIsIGVycik7XG4gICAgICB9KVxuICAgICAgLmZpbmFsbHkoKCkgPT4gcmVuZGVyTG9hZChcIiNVc2VyVXBsb2FkQnV0dG9uXCIsIFwiU2FsdmFyXCIpKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoXCJJbnZhbGlkIGlucHV0IHZhbHVlc1wiKTtcbiAgfVxufVxuXG5jb25zdCBQcm9maWxlQ2FyZHMgPSBuZXcgU2VjdGlvbihcbiAge1xuICAgIGRhdGE6IFtdLFxuICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xuICAgICAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGl0ZW0sIFwiI2NhcmQtdGVtcGxhdGVcIiwgaGFuZGxlQ2FyZENsaWNrKTtcbiAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcbiAgICAgIFByb2ZpbGVDYXJkcy5zZXRJdGVtKGNhcmRFbGVtZW50KTtcbiAgICB9LFxuICB9LFxuICBwaG90b0NvbnRhaW5lclxuKTtcblxuZXhwb3J0IGZ1bmN0aW9uIGhhbmRsZVVwbG9hZEZvcm1TdWJtaXQoaW5wdXRWYWx1ZXMsIGN1cnJlbnRVc2VySWQpIHtcbiAgcmVuZGVyTG9hZChcIiNDYXJkVXBsb2FkQnV0dG9uXCIsIFwiQ3JpYW5kby4uLlwiKTtcbiAgaWYgKGlucHV0VmFsdWVzLnVybCAhPT0gXCJcIiAmJiBpbnB1dFZhbHVlcy50aXRsZSAhPT0gXCJcIikge1xuICAgIGNvbnN0IG5ld0NhcmQgPSB7XG4gICAgICBuYW1lOiBpbnB1dFZhbHVlcy50aXRsZSxcbiAgICAgIGxpbms6IGlucHV0VmFsdWVzLnVybCxcbiAgICB9O1xuXG4gICAgVXRpbEFQSS5hZGRDYXJkKG5ld0NhcmQpXG4gICAgICAudGhlbigoYWRkZWRDYXJkKSA9PiB7XG4gICAgICAgIGFkZGVkQ2FyZC5vd25lciA9IHsgX2lkOiBjdXJyZW50VXNlcklkIH07IC8vIERlZmluZSBJRCBkbyBvd25lciBwcm8gSUQgZG8gdXN1YXJpbyBhdHVhbFxuICAgICAgICBjb25zdCBjYXJkID0gbmV3IENhcmQoXG4gICAgICAgICAgYWRkZWRDYXJkLFxuICAgICAgICAgIFwiI2NhcmQtdGVtcGxhdGVcIixcbiAgICAgICAgICAoY2FyZEluc3RhbmNlKSA9PiBwb3B1cENvbmZpcm1hdGlvbi5vcGVuKGNhcmRJbnN0YW5jZSksXG4gICAgICAgICAgY3VycmVudFVzZXJJZCxcbiAgICAgICAgICBoYW5kbGVMaWtlc1xuICAgICAgICApO1xuICAgICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQuZ2VuZXJhdGVDYXJkKCk7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGhvdG9cIikucHJlcGVuZChjYXJkRWxlbWVudCk7XG4gICAgICAgIHNldHVwUG9wdXBzKFwiLnBob3RvX19jYXJkXCIpO1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBhZGQgbmV3IGNhcmQ6XCIsIGVycik7XG4gICAgICB9KVxuICAgICAgLmZpbmFsbHkoKCkgPT4gcmVuZGVyTG9hZChcIiNDYXJkVXBsb2FkQnV0dG9uXCIsIFwiQ3JpYXJcIikpO1xuICB9IGVsc2Uge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJUaXRsZSBhbmQgVVJMIGNhbm5vdCBiZSBlbXB0eVwiKTtcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgaGFuZGxlQ29uZmlybWF0aW9uU3VibWl0ID0gKHRhcmdldCkgPT4ge1xuICBVdGlsQVBJLmRlbGV0ZUNhcmQodGFyZ2V0Ll9jYXJkSUQpXG4gICAgLnRoZW4oKCkgPT4ge1xuICAgICAgdGFyZ2V0Ll9jYXJkLnJlbW92ZSgpOyAvLyBSZW1vdmUgYSBjYXJ0YSBkbyBEb21cbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgIH0pO1xuICBwb3B1cENvbmZpcm1hdGlvbi5jbG9zZSgpO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIGhhbmRsZUxpa2VzKGNhcmRJZCwgY2FyZEVsZW1lbnQpIHtcbiAgY29uc3QgbGlrZUJ1dHRvbiA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGhvdG9fX2xpa2VcIik7XG4gIGNvbnN0IGxpa2VDb3VudCA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGhvdG9fX2xpa2UtY291bnRcIik7XG5cbiAgaWYgKGxpa2VCdXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKFwicGhvdG9fX2xpa2VfYWN0aXZlXCIpKSB7XG4gICAgVXRpbEFQSS5yZW1vdmVMaWtlKGNhcmRJZClcbiAgICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgIGxpa2VCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcInBob3RvX19saWtlX2FjdGl2ZVwiKTtcbiAgICAgICAgbGlrZUNvdW50LnRleHRDb250ZW50ID0gZGF0YS5saWtlcy5sZW5ndGg7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgVXRpbEFQSS5hZGRMaWtlKGNhcmRJZClcbiAgICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgIGxpa2VCdXR0b24uY2xhc3NMaXN0LmFkZChcInBob3RvX19saWtlX2FjdGl2ZVwiKTtcbiAgICAgICAgbGlrZUNvdW50LnRleHRDb250ZW50ID0gZGF0YS5saWtlcy5sZW5ndGg7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldHVwUG9wdXBzKGNhcmQpIHtcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjYXJkKS5mb3JFYWNoKChpKSA9PlxuICAgIGkucXVlcnlTZWxlY3RvcihcIi5waG90b19fY2FyZC1pbWFnZVwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgY29uc3QgSW1nU3JjID0gaS5xdWVyeVNlbGVjdG9yKFwiLnBob3RvX19jYXJkLWltYWdlXCIpLnNyYztcbiAgICAgIGNvbnN0IHRpdGxlID0gaS5xdWVyeVNlbGVjdG9yKFwiLnBob3RvX190ZXh0XCIpLnRleHRDb250ZW50O1xuICAgICAgY29uc3QgcG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIucG9wdXBcIik7XG4gICAgICBwb3B1cC5vcGVuKEltZ1NyYywgdGl0bGUpO1xuICAgICAgcG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoXCIucGhvdG9fX2NhcmRcIik7XG4gICAgfSlcbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldHVwUHJvZmlsZUVkaXQoKSB7XG4gIHVzZXJpbWFnZS5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdmVyXCIsICgpID0+IHtcbiAgICB1c2VyaW1hZ2UucXVlcnlTZWxlY3RvcihcIi51c2VyX19pbWFnZS1tYWluXCIpLnN0eWxlLm9wYWNpdHkgPSBcIjI1JVwiO1xuICAgIHVzZXJpbWFnZUVkaXQuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgfSk7XG4gIHVzZXJpbWFnZS5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdXRcIiwgKCkgPT4ge1xuICAgIHVzZXJpbWFnZS5xdWVyeVNlbGVjdG9yKFwiLnVzZXJfX2ltYWdlLW1haW5cIikuc3R5bGUub3BhY2l0eSA9IFwiMTAwJVwiO1xuICAgIHVzZXJpbWFnZUVkaXQuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbmRlckxvYWQoc2VsZWN0b3IsIHRleHQpIHtcbiAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xuICBpZiAoIWVsZW1lbnQpIHtcbiAgICBjb25zb2xlLmVycm9yKGBFbGVtZW50IHdpdGggc2VsZWN0b3IgJHtzZWxlY3Rvcn0gbm90IGZvdW5kYCk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGVsZW1lbnQudGV4dENvbnRlbnQgPSB0ZXh0O1xufVxuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcbmltcG9ydCB7IFZhbGlkYXRlIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvVmFsaWRhdGUuanNcIjtcbmltcG9ydCB7IENhcmQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgeyBQb3B1cFdpdGhDb25maXJtYXRpb24sIFBvcHVwV2l0aEZvcm0gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cC5qc1wiO1xuaW1wb3J0IHtcbiAgaGFuZGxlVXBsb2FkRm9ybVN1Ym1pdCxcbiAgaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQsXG4gIHNldHVwUG9wdXBzLFxuICBzZXR1cFByb2ZpbGVFZGl0LFxuICByZW5kZXJMb2FkLFxuICBoYW5kbGVDb25maXJtYXRpb25TdWJtaXQsXG4gIGhhbmRsZUxpa2VzLFxufSBmcm9tIFwiLi4vdXRpbHMvdXRpbHMuanNcIjtcbmltcG9ydCB7XG4gIGZvcm1Qcm9maWxlLFxuICBmb3JtVXBsb2FkLFxuICBmb3JtRWRpdCxcbiAgYnV0dG9uQWRkLFxuICBwaG90b0NvbnRhaW5lcixcbiAgdXNlcmltYWdlLFxuICBuYW1lSW5wdXQsXG4gIGFib3V0SW5wdXQsXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcbmltcG9ydCB7IFNlY3Rpb24gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcbmltcG9ydCBBUEkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQVBJLmpzXCI7XG5cbmNvbnN0IGFwaSA9IG5ldyBBUEkoe1xuICB1cmw6IFwiaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS93ZWItcHRici1jb2hvcnQtMTFcIixcbiAgaGVhZGVyczoge1xuICAgIGF1dGhvcml6YXRpb246IFwiZWY2MWFmN2YtNjJiZC00MmM2LWFjNjQtZGUyZDI3MzEyOTJiXCIsXG4gICAgXCJDb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gIH0sXG59KTtcblxuY29uc3QgVXNlclZhbHVlcyA9IG5ldyBVc2VySW5mbyh7XG4gIG5hbWVTZWxlY3RvcjogXCIudXNlcl9fbmFtZVwiLFxuICBhYm91dFNlbGVjdG9yOiBcIi51c2VyX19yb2xlXCIsXG4gIHBpY3R1cmVTZWxlY3RvcjogXCIudXNlcl9faW1hZ2UtbWFpblwiLFxufSk7XG5cbmV4cG9ydCBjb25zdCBwb3B1cENvbmZpcm1hdGlvbiA9IG5ldyBQb3B1cFdpdGhDb25maXJtYXRpb24oXG4gIFwiI1N1Ym1pdENoZWNrXCIsXG4gIGhhbmRsZUNvbmZpcm1hdGlvblN1Ym1pdFxuKTtcbnBvcHVwQ29uZmlybWF0aW9uLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmxldCBjdXJyZW50VXNlcklkO1xuXG5hcGlcbiAgLmdldFVzZXJEYXRhKClcbiAgLnRoZW4oKHVzZXJEYXRhKSA9PiB7XG4gICAgVXNlclZhbHVlcy5zZXRVc2VySW5mbyh1c2VyRGF0YSk7XG4gICAgY3VycmVudFVzZXJJZCA9IHVzZXJEYXRhLl9pZDtcblxuICAgIGFwaVxuICAgICAgLmdldEluaXRpYWxDYXJkcygpXG4gICAgICAudGhlbigoY2FyZHMpID0+IHtcbiAgICAgICAgY29uc3QgUHJvZmlsZUNhcmRzID0gbmV3IFNlY3Rpb24oXG4gICAgICAgICAge1xuICAgICAgICAgICAgZGF0YTogY2FyZHMsXG4gICAgICAgICAgICByZW5kZXJlcjogKGl0ZW0pID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxuICAgICAgICAgICAgICAgIGl0ZW0sXG4gICAgICAgICAgICAgICAgXCIjY2FyZC10ZW1wbGF0ZVwiLFxuICAgICAgICAgICAgICAgIChjYXJkSW5zdGFuY2UpID0+IHBvcHVwQ29uZmlybWF0aW9uLm9wZW4oY2FyZEluc3RhbmNlKSxcbiAgICAgICAgICAgICAgICBjdXJyZW50VXNlcklkLFxuICAgICAgICAgICAgICAgIGhhbmRsZUxpa2VzXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcbiAgICAgICAgICAgICAgUHJvZmlsZUNhcmRzLnNldEl0ZW0oY2FyZEVsZW1lbnQpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHBob3RvQ29udGFpbmVyXG4gICAgICAgICk7XG4gICAgICAgIFByb2ZpbGVDYXJkcy5yZW5kZXJJdGVtKCk7XG4gICAgICAgIHNldHVwUG9wdXBzKFwiLnBob3RvX19jYXJkXCIpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gbG9hZCBpbml0aWFsIGNhcmRzOlwiLCBlcnIpO1xuICAgICAgfSk7XG4gIH0pXG4gIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBmZXRjaCB1c2VyIGRhdGE6XCIsIGVycik7XG4gIH0pO1xuXG5jb25zdCBmb3JtUHJvZmlsZVZhbGlkYXRvciA9IG5ldyBWYWxpZGF0ZShcbiAge1xuICAgIGlucHV0U2VsZWN0b3I6IFwiLmZvcm1fX2lucHV0XCIsXG4gICAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLmZvcm1fX2J1dHRvblwiLFxuICAgIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwiZm9ybV9fYnV0dG9uLWRpc2FibGVkXCIsXG4gICAgaW5wdXRFcnJvckNsYXNzOiBcImZvcm1fX2lucHV0LWludmFsaWRcIixcbiAgICBlcnJvckNsYXNzOiBcImZvcm1fX2lucHV0LWVycm9yXCIsXG4gIH0sXG4gIGZvcm1Qcm9maWxlXG4pO1xuZm9ybVByb2ZpbGVWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5jb25zdCBmb3JtVXBsb2FkVmFsaWRhdG9yID0gbmV3IFZhbGlkYXRlKFxuICB7XG4gICAgaW5wdXRTZWxlY3RvcjogXCIuZm9ybV9faW5wdXRcIixcbiAgICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIuZm9ybV9fYnV0dG9uXCIsXG4gICAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJmb3JtX19idXR0b24tZGlzYWJsZWRcIixcbiAgICBpbnB1dEVycm9yQ2xhc3M6IFwiZm9ybV9faW5wdXQtaW52YWxpZFwiLFxuICAgIGVycm9yQ2xhc3M6IFwiZm9ybV9faW5wdXQtZXJyb3JcIixcbiAgfSxcbiAgZm9ybVVwbG9hZFxuKTtcbmZvcm1VcGxvYWRWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5jb25zdCBwb3B1cFByb2ZpbGUgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgXCIjRm9ybVByb2ZpbGVcIixcbiAgaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQsXG4gIGZvcm1Qcm9maWxlVmFsaWRhdG9yXG4pO1xucG9wdXBQcm9maWxlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IHBvcHVwVXBsb2FkID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gIFwiI0Zvcm1VcGxvYWRcIixcbiAgaGFuZGxlVXBsb2FkRm9ybVN1Ym1pdCxcbiAgZm9ybVVwbG9hZFZhbGlkYXRvclxuKTtcbnBvcHVwVXBsb2FkLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmZvcm1FZGl0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIHBvcHVwUHJvZmlsZS5vcGVuKCk7XG4gIGNvbnN0IGN1cnJlbnRWYWx1ZXMgPSBVc2VyVmFsdWVzLmdldFVzZXJJbmZvKCk7XG4gIG5hbWVJbnB1dC52YWx1ZSA9IGN1cnJlbnRWYWx1ZXMubmFtZTtcbiAgYWJvdXRJbnB1dC52YWx1ZSA9IGN1cnJlbnRWYWx1ZXMuYWJvdXQ7XG59KTtcbmJ1dHRvbkFkZC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBwb3B1cFVwbG9hZC5vcGVuKCk7XG59KTtcblxuY29uc3QgaGFuZGxlQXZhdGFyRm9ybVN1Ym1pdCA9IChpbnB1dFZhbHVlcykgPT4ge1xuICByZW5kZXJMb2FkKFwiI1BpY3R1cmVVcGxvYWRCdXR0b25cIiwgXCJTYWx2YW5kby4uLlwiKTtcbiAgY29uc3QgYXZhdGFyVXJsID0gaW5wdXRWYWx1ZXMucHJvZmlsZVVybDtcbiAgYXBpXG4gICAgLnVwZGF0ZVByb2ZpbGVQaWN0dXJlKHsgYXZhdGFyOiBhdmF0YXJVcmwgfSlcbiAgICAudGhlbigodXNlckRhdGEpID0+IHtcbiAgICAgIFVzZXJWYWx1ZXMuc2V0VXNlckluZm8oeyAuLi51c2VyRGF0YSwgYXZhdGFyOiB1c2VyRGF0YS5hdmF0YXIgfSk7XG4gICAgICBwb3B1cEF2YXRhci5jbG9zZSgpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gdXBkYXRlIHByb2ZpbGUgcGljdHVyZTpcIiwgZXJyKTtcbiAgICB9KVxuICAgIC5maW5hbGx5KCgpID0+IHJlbmRlckxvYWQoXCIjUGljdHVyZVVwbG9hZEJ1dHRvblwiLCBcIlNhbHZhclwiKSk7XG59O1xuXG5jb25zdCBmb3JtQXZhdGFyVmFsaWRhdG9yID0gbmV3IFZhbGlkYXRlKFxuICB7XG4gICAgaW5wdXRTZWxlY3RvcjogXCIuZm9ybV9faW5wdXRcIixcbiAgICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIuZm9ybV9fYnV0dG9uXCIsXG4gICAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJmb3JtX19idXR0b24tZGlzYWJsZWRcIixcbiAgICBpbnB1dEVycm9yQ2xhc3M6IFwiZm9ybV9faW5wdXQtaW52YWxpZFwiLFxuICAgIGVycm9yQ2xhc3M6IFwiZm9ybV9faW5wdXQtZXJyb3JcIixcbiAgfSxcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNGb3JtUHJvZmlsZVBpY3R1cmVcIilcbik7XG5mb3JtQXZhdGFyVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuY29uc3QgcG9wdXBBdmF0YXIgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgXCIjRm9ybVByb2ZpbGVQaWN0dXJlXCIsXG4gIGhhbmRsZUF2YXRhckZvcm1TdWJtaXQsXG4gIGZvcm1BdmF0YXJWYWxpZGF0b3Jcbik7XG5wb3B1cEF2YXRhci5zZXRFdmVudExpc3RlbmVycygpO1xuXG51c2VyaW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgcG9wdXBBdmF0YXIub3BlbigpO1xufSk7XG5cbnNldHVwUHJvZmlsZUVkaXQocG9wdXBBdmF0YXIpO1xuIl0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJleHBvcnRzIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiVmFsaWRhdGUiLCJjb25zdHJ1Y3RvciIsInNlbGVjdG9ycyIsImZvcm1TZWxlY3RvciIsInRoaXMiLCJfaW5wdXRzIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImlucHV0U2VsZWN0b3IiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2J1dHRvbiIsInF1ZXJ5U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImVuYWJsZVZhbGlkYXRpb24iLCJfdG9nZ2xlQnV0dG9uIiwiZm9yRWFjaCIsImlucHV0IiwiYWRkRXZlbnRMaXN0ZW5lciIsIl92YWxpZGF0ZUlucHV0cyIsImlucHV0TGlzdCIsIl9jaGVja0ludmFsaWQiLCJkaXNhYmxlZCIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsInNvbWUiLCJ2YWxpZGl0eSIsInZhbGlkIiwic3BhbkVycm9yIiwibmV4dEVsZW1lbnRTaWJsaW5nIiwidGV4dENvbnRlbnQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsInJlc2V0VmFsaWRhdGlvbiIsIkNhcmQiLCJjYXJkcyIsInNlbGVjdG9yIiwiaGFuZGxlQ29uZmlybSIsImN1cnJlbnRVc2VySWQiLCJoYW5kbGVMaWtlcyIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9jYXJkSUQiLCJfaWQiLCJfb3duZXJJRCIsIm93bmVyIiwiX2xpa2VzIiwibGlrZXMiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUNvbmZpcm0iLCJfY3VycmVudFVzZXJJZCIsIl9oYW5kbGVMaWtlcyIsIl9nZXRUZW1wbGF0ZSIsImRvY3VtZW50IiwiY29udGVudCIsImNsb25lTm9kZSIsIl9zZXRMaXN0ZW5lcnMiLCJsaWtlQnV0dG9uIiwiX2NhcmQiLCJkZWxldGVCdXR0b24iLCJzdHlsZSIsImRpc3BsYXkiLCJ1cGRhdGVMaWtlcyIsImRhdGEiLCJsZW5ndGgiLCJsaWtlIiwiZ2VuZXJhdGVDYXJkIiwic3JjIiwiYWx0IiwiY29uc29sZSIsImxvZyIsImhhbmRsZU5vUGljcyIsInBpY3R1cmVzIiwiZW1wdHlNZXNzYWdlIiwiaW5zZXJ0QWRqYWNlbnRIVE1MIiwidXNlcmltYWdlIiwidXNlcmltYWdlRWRpdCIsInBhZ2VPcGFjaXR5IiwiYWJvdXRJbnB1dCIsIm5hbWVJbnB1dCIsImZvcm1Qcm9maWxlIiwiZm9ybVVwbG9hZCIsImZvcm1FZGl0IiwiYnV0dG9uQWRkIiwicGhvdG9Db250YWluZXIiLCJmb3JtQ2xvc2UiLCJpbWFnZUNsb3NlIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwIiwiX2lzT3BlbiIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJvcGVuIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZ0Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJjb250YWlucyIsInRhcmdldCIsImJ1dHRvbiIsIlBvcHVwV2l0aEltYWdlIiwic3VwZXIiLCJfcG9wdXBTdWJ0aXRsZSIsIl9wb3B1cEltYWdlIiwiaW1hZ2VTcmMiLCJ0aXRsZSIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVTdWJtaXQiLCJ2YWxpZGF0b3IiLCJfaGFuZGxlU3VibWl0IiwiX2lucHV0TGlzdCIsIl92YWxpZGF0b3IiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJpbnB1dFZhbHVlcyIsInZhbHVlIiwiQ2xvc2VCdXR0b25zIiwicHJldmVudERlZmF1bHQiLCJVc2VySW5mbyIsIm5hbWVTZWxlY3RvciIsImFib3V0U2VsZWN0b3IiLCJwaWN0dXJlU2VsZWN0b3IiLCJfbmFtZUVsZW1lbnQiLCJfYWJvdXRFbGVtZW50IiwiX3BpY3R1cmVFbGVtZW50IiwiZ2V0VXNlckluZm8iLCJhYm91dCIsImF2YXRhciIsInNldFVzZXJJbmZvIiwiQVBJIiwiX3N0YW5kYXJkVXJsIiwidXJsIiwiX2hlYWRlcnMiLCJoZWFkZXJzIiwiZ2V0SW5pdGlhbENhcmRzIiwiZmV0Y2giLCJ0aGVuIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImNhdGNoIiwiZXJyIiwiZXJyb3IiLCJnZXRVc2VyRGF0YSIsInNhdmVQcm9maWxlQ2hhbmdlcyIsInVzZXJEYXRhIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJ1cGRhdGVQcm9maWxlUGljdHVyZSIsImFkZENhcmQiLCJjYXJkRGF0YSIsImRlbGV0ZUNhcmQiLCJjYXJkSWQiLCJhZGRMaWtlIiwicmVtb3ZlTGlrZSIsIlNlY3Rpb24iLCJyZW5kZXJlciIsImNvbnRhaW5lclNlbGVjdG9yIiwiX3JlbmRlckxpc3QiLCJfcmVuZGVyTWV0aG9kIiwiX3JlbmRlckNvbnRhaW5lciIsIl9jbGVhckNvbnRhaW5lciIsImlubmVySFRNTCIsInJlbmRlckl0ZW0iLCJpIiwic2V0SXRlbSIsInByZXBlbmQiLCJ1c2VySW5mbyIsIlV0aWxBUEkiLCJhdXRob3JpemF0aW9uIiwiUHJvZmlsZUNhcmRzIiwiaXRlbSIsImNhcmRFbGVtZW50IiwiaGFuZGxlQ2FyZENsaWNrIiwibGlrZUNvdW50Iiwic2V0dXBQb3B1cHMiLCJjYXJkIiwic3RvcFByb3BhZ2F0aW9uIiwiSW1nU3JjIiwicG9wdXAiLCJyZW5kZXJMb2FkIiwidGV4dCIsImVsZW1lbnQiLCJhcGkiLCJVc2VyVmFsdWVzIiwicG9wdXBDb25maXJtYXRpb24iLCJfdGFyZ2V0IiwiY2FyZEluc3RhbmNlIiwiZm9ybVByb2ZpbGVWYWxpZGF0b3IiLCJmb3JtVXBsb2FkVmFsaWRhdG9yIiwicG9wdXBQcm9maWxlIiwiZmluYWxseSIsInBvcHVwVXBsb2FkIiwibmV3Q2FyZCIsImFkZGVkQ2FyZCIsImN1cnJlbnRWYWx1ZXMiLCJmb3JtQXZhdGFyVmFsaWRhdG9yIiwicG9wdXBBdmF0YXIiLCJhdmF0YXJVcmwiLCJwcm9maWxlVXJsIiwib3BhY2l0eSJdLCJzb3VyY2VSb290IjoiIn0=